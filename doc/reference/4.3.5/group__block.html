<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoap: Block Transfer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcoap<span id="projectnumber">&#160;4.3.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__block.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Block Transfer<div class="ingroups"><a class="el" href="group__application__api.html">Application API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>API for handling PDUs using CoAP Block options (RFC7959)  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Block Transfer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block.svg" width="294" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoap__block__t.html">coap_block_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure of Block options.  <a href="structcoap__block__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure of Block options with BERT support.  <a href="structcoap__block__b__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1a064effcefd02b9e5c8f99b297c0edc" id="r_ga1a064effcefd02b9e5c8f99b297c0edc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga1a064effcefd02b9e5c8f99b297c0edc">COAP_MAX_BLOCK_SZX</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:ga1a064effcefd02b9e5c8f99b297c0edc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The largest value for the SZX component in a Block option.  <br /></td></tr>
<tr class="separator:ga1a064effcefd02b9e5c8f99b297c0edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8eced3c2de1f68126b8d6d95e694627" id="r_gaf8eced3c2de1f68126b8d6d95e694627"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gaf8eced3c2de1f68126b8d6d95e694627">COAP_BLOCK_USE_LIBCOAP</a>&#160;&#160;&#160;0x01 /* Use libcoap to do block requests */</td></tr>
<tr class="separator:gaf8eced3c2de1f68126b8d6d95e694627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga665ff95d010e2d02b092573f66596927" id="r_ga665ff95d010e2d02b092573f66596927"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga665ff95d010e2d02b092573f66596927">COAP_BLOCK_SINGLE_BODY</a>&#160;&#160;&#160;0x02 /* Deliver the data as a single body */</td></tr>
<tr class="separator:ga665ff95d010e2d02b092573f66596927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e6567cfe08602157b812ba85e6c090f" id="r_ga4e6567cfe08602157b812ba85e6c090f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga4e6567cfe08602157b812ba85e6c090f">COAP_BLOCK_TRY_Q_BLOCK</a>&#160;&#160;&#160;0x04 /* Try <a class="el" href="coap__net_8c.html#aedd6a61216a54973fc7db5272affee75">Q</a>-Block method */</td></tr>
<tr class="separator:ga4e6567cfe08602157b812ba85e6c090f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga313c7b2a3ead6be40950a1fa0b1337b6" id="r_ga313c7b2a3ead6be40950a1fa0b1337b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga313c7b2a3ead6be40950a1fa0b1337b6">COAP_BLOCK_USE_M_Q_BLOCK</a>&#160;&#160;&#160;0x08 /* Use M bit when recovering <a class="el" href="coap__net_8c.html#aedd6a61216a54973fc7db5272affee75">Q</a>-Block2 */</td></tr>
<tr class="separator:ga313c7b2a3ead6be40950a1fa0b1337b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac86266e48cc25a1ba8640e058b3d3ee" id="r_gaac86266e48cc25a1ba8640e058b3d3ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gaac86266e48cc25a1ba8640e058b3d3ee">COAP_BLOCK_NO_PREEMPTIVE_RTAG</a>&#160;&#160;&#160;0x10 /* (cl) Don't use pre-emptive Request-Tags */</td></tr>
<tr class="separator:gaac86266e48cc25a1ba8640e058b3d3ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a510f610b8753510b017e64052418a0" id="r_ga5a510f610b8753510b017e64052418a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga5a510f610b8753510b017e64052418a0">COAP_BLOCK_STLESS_FETCH</a>&#160;&#160;&#160;0x20 /* (cl) Assume server supports stateless FETCH */</td></tr>
<tr class="separator:ga5a510f610b8753510b017e64052418a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fcfc265023c5b4276da988265692810" id="r_ga3fcfc265023c5b4276da988265692810"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga3fcfc265023c5b4276da988265692810">COAP_BLOCK_STLESS_BLOCK2</a>&#160;&#160;&#160;0x40 /* (svr)Server is stateless for handling Block2 */</td></tr>
<tr class="separator:ga3fcfc265023c5b4276da988265692810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb4e317d4398e41f4238479d361ba31f" id="r_gabb4e317d4398e41f4238479d361ba31f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gabb4e317d4398e41f4238479d361ba31f">COAP_BLOCK_NOT_RANDOM_BLOCK1</a></td></tr>
<tr class="separator:gabb4e317d4398e41f4238479d361ba31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7d63d1ac6f4e326be162f5fb1ee48d9" id="r_gad7d63d1ac6f4e326be162f5fb1ee48d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gad7d63d1ac6f4e326be162f5fb1ee48d9">COAP_OPT_BLOCK_LAST</a>(opt)&#160;&#160;&#160;  (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) ? (<a class="el" href="group__opt__filter.html#gaec4e944d39722779cac610ed22ee09db">coap_opt_value</a>(opt) + (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt)-1)) : 0)</td></tr>
<tr class="memdesc:gad7d63d1ac6f4e326be162f5fb1ee48d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the least significant byte of a Block option <code>opt</code>.  <br /></td></tr>
<tr class="separator:gad7d63d1ac6f4e326be162f5fb1ee48d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0adbbc6858f203543ae19f840b79dca" id="r_gac0adbbc6858f203543ae19f840b79dca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gac0adbbc6858f203543ae19f840b79dca">COAP_OPT_BLOCK_END_BYTE</a>(opt)</td></tr>
<tr class="memdesc:gac0adbbc6858f203543ae19f840b79dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the last byte of <code>opt</code>.  <br /></td></tr>
<tr class="separator:gac0adbbc6858f203543ae19f840b79dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e87e4bbd861945d9d1cc672c781662b" id="r_ga9e87e4bbd861945d9d1cc672c781662b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga9e87e4bbd861945d9d1cc672c781662b">COAP_OPT_BLOCK_MORE</a>(opt)&#160;&#160;&#160;  (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) ? (<a class="el" href="group__block.html#gac0adbbc6858f203543ae19f840b79dca">COAP_OPT_BLOCK_END_BYTE</a>(opt) &amp; 0x08) : 0)</td></tr>
<tr class="memdesc:ga9e87e4bbd861945d9d1cc672c781662b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the More-bit of a Block option <code>opt</code>.  <br /></td></tr>
<tr class="separator:ga9e87e4bbd861945d9d1cc672c781662b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b14a086973dff06815f999b6c873429" id="r_ga3b14a086973dff06815f999b6c873429"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga3b14a086973dff06815f999b6c873429">COAP_OPT_BLOCK_SZX</a>(opt)&#160;&#160;&#160;  (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) ? (<a class="el" href="group__block.html#gac0adbbc6858f203543ae19f840b79dca">COAP_OPT_BLOCK_END_BYTE</a>(opt) &amp; 0x07) : 0)</td></tr>
<tr class="memdesc:ga3b14a086973dff06815f999b6c873429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the SZX-field of a Block option <code>opt</code>.  <br /></td></tr>
<tr class="separator:ga3b14a086973dff06815f999b6c873429"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga835a174fcf1b21cc213c7d99efb4b68a" id="r_ga835a174fcf1b21cc213c7d99efb4b68a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga835a174fcf1b21cc213c7d99efb4b68a">coap_release_large_data_t</a>) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, void *app_ptr)</td></tr>
<tr class="memdesc:ga835a174fcf1b21cc213c7d99efb4b68a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback handler for de-allocating the data based on <code>app_ptr</code> provided to coap_add_data_large_*() functions following transmission of the supplied data.  <br /></td></tr>
<tr class="separator:ga835a174fcf1b21cc213c7d99efb4b68a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaac6c90297abc6e2da80a6212b0d10e99" id="r_gaac6c90297abc6e2da80a6212b0d10e99"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gaac6c90297abc6e2da80a6212b0d10e99">coap_opt_block_num</a> (const <a class="el" href="coap__option_8h.html#a963ad4994625360a5ac70d9df2ab5412">coap_opt_t</a> *block_opt)</td></tr>
<tr class="memdesc:gaac6c90297abc6e2da80a6212b0d10e99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of field <code>num</code> in the given block option <code>block_opt</code>.  <br /></td></tr>
<tr class="separator:gaac6c90297abc6e2da80a6212b0d10e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa67d14fa889f79afee9762dab7fc83e4" id="r_gaa67d14fa889f79afee9762dab7fc83e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libcoap_8h.html#a58b4446dccd0b8c21b3532ef6b77a57d">COAP_STATIC_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gaa67d14fa889f79afee9762dab7fc83e4">coap_more_blocks</a> (size_t data_len, unsigned int num, uint16_t szx)</td></tr>
<tr class="memdesc:gaa67d14fa889f79afee9762dab7fc83e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if more than <code>num</code> blocks are required to deliver <code>data_len</code> bytes of data for a block size of 1 &lt;&lt; (<code>szx</code> + 4).  <br /></td></tr>
<tr class="separator:gaa67d14fa889f79afee9762dab7fc83e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4948cbc673c565b3eba270c5f784db3" id="r_gab4948cbc673c565b3eba270c5f784db3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gab4948cbc673c565b3eba270c5f784db3">coap_get_block</a> (const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, <a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a> number, <a class="el" href="structcoap__block__t.html">coap_block_t</a> *block)</td></tr>
<tr class="memdesc:gab4948cbc673c565b3eba270c5f784db3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <code>block</code> from <code>pdu</code>.  <br /></td></tr>
<tr class="separator:gab4948cbc673c565b3eba270c5f784db3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9791ef236293c2e629f98b2d2a7af478" id="r_ga9791ef236293c2e629f98b2d2a7af478"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga9791ef236293c2e629f98b2d2a7af478">coap_get_block_b</a> (const <a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, <a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a> number, <a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a> *block)</td></tr>
<tr class="memdesc:ga9791ef236293c2e629f98b2d2a7af478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <code>block</code> from <code>pdu</code>.  <br /></td></tr>
<tr class="separator:ga9791ef236293c2e629f98b2d2a7af478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1451ec6a5dcc209ed79d6e571fb42fc" id="r_gae1451ec6a5dcc209ed79d6e571fb42fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gae1451ec6a5dcc209ed79d6e571fb42fc">coap_write_block_opt</a> (<a class="el" href="structcoap__block__t.html">coap_block_t</a> *block, <a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a> number, <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, size_t data_length)</td></tr>
<tr class="memdesc:gae1451ec6a5dcc209ed79d6e571fb42fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a block option of type <code>number</code> to message <code>pdu</code>.  <br /></td></tr>
<tr class="separator:gae1451ec6a5dcc209ed79d6e571fb42fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e5de6865934ed03e6d150c95acfdc97" id="r_ga6e5de6865934ed03e6d150c95acfdc97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga6e5de6865934ed03e6d150c95acfdc97">coap_write_block_b_opt</a> (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a> *block, <a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a> number, <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, size_t data_length)</td></tr>
<tr class="memdesc:ga6e5de6865934ed03e6d150c95acfdc97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a block option of type <code>number</code> to message <code>pdu</code>.  <br /></td></tr>
<tr class="separator:ga6e5de6865934ed03e6d150c95acfdc97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73094dc713e61b72cec8e37ffaf72a39" id="r_ga73094dc713e61b72cec8e37ffaf72a39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga73094dc713e61b72cec8e37ffaf72a39">coap_add_block</a> (<a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, size_t len, const uint8_t *data, unsigned int block_num, unsigned char block_szx)</td></tr>
<tr class="memdesc:ga73094dc713e61b72cec8e37ffaf72a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the <code>block_num</code> block of size 1 &lt;&lt; (<code>block_szx</code> + 4) from source <code>data</code> to <code>pdu</code>.  <br /></td></tr>
<tr class="separator:ga73094dc713e61b72cec8e37ffaf72a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d021b08e7774a54d635cc049aa491f7" id="r_ga5d021b08e7774a54d635cc049aa491f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga5d021b08e7774a54d635cc049aa491f7">coap_add_block_b_data</a> (<a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, size_t len, const uint8_t *data, <a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a> *block)</td></tr>
<tr class="memdesc:ga5d021b08e7774a54d635cc049aa491f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the appropriate payload data of the body to the <code>pdu</code>.  <br /></td></tr>
<tr class="separator:ga5d021b08e7774a54d635cc049aa491f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7f4a656ce3911d46e03504b503643d6" id="r_gaf7f4a656ce3911d46e03504b503643d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcoap__binary__t.html">coap_binary_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#gaf7f4a656ce3911d46e03504b503643d6">coap_block_build_body</a> (<a class="el" href="structcoap__binary__t.html">coap_binary_t</a> *body_data, size_t length, const uint8_t *data, size_t offset, size_t total)</td></tr>
<tr class="memdesc:gaf7f4a656ce3911d46e03504b503643d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-assemble payloads into a body.  <br /></td></tr>
<tr class="separator:gaf7f4a656ce3911d46e03504b503643d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga870799d383b3d3392ca711bd7dce467b" id="r_ga870799d383b3d3392ca711bd7dce467b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga870799d383b3d3392ca711bd7dce467b">coap_add_data_blocked_response</a> (const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *request, <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *response, uint16_t media_type, int maxage, size_t length, const uint8_t *data)</td></tr>
<tr class="memdesc:ga870799d383b3d3392ca711bd7dce467b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the appropriate part of <code>data</code> to the <code>response</code> pdu.  <br /></td></tr>
<tr class="separator:ga870799d383b3d3392ca711bd7dce467b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4095674c01f0b924820b077ee159deeb" id="r_ga4095674c01f0b924820b077ee159deeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga4095674c01f0b924820b077ee159deeb">coap_add_data_large_request</a> (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *pdu, size_t length, const uint8_t *data, <a class="el" href="group__block.html#ga835a174fcf1b21cc213c7d99efb4b68a">coap_release_large_data_t</a> release_func, void *app_ptr)</td></tr>
<tr class="memdesc:ga4095674c01f0b924820b077ee159deeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates given data with the <code>pdu</code> that is passed as second parameter.  <br /></td></tr>
<tr class="separator:ga4095674c01f0b924820b077ee159deeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08fe64e0be673752c1686be58d43cc48" id="r_ga08fe64e0be673752c1686be58d43cc48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga08fe64e0be673752c1686be58d43cc48">coap_add_data_large_response</a> (<a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *resource, <a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *request, <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *response, const <a class="el" href="structcoap__string__t.html">coap_string_t</a> *query, uint16_t media_type, int maxage, uint64_t etag, size_t length, const uint8_t *data, <a class="el" href="group__block.html#ga835a174fcf1b21cc213c7d99efb4b68a">coap_release_large_data_t</a> release_func, void *app_ptr)</td></tr>
<tr class="memdesc:ga08fe64e0be673752c1686be58d43cc48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates given data with the <code>response</code> pdu that is passed as fourth parameter.  <br /></td></tr>
<tr class="separator:ga08fe64e0be673752c1686be58d43cc48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01fc0d92035beec6b18d4467d8c58970" id="r_ga01fc0d92035beec6b18d4467d8c58970"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga01fc0d92035beec6b18d4467d8c58970">coap_context_set_block_mode</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, uint32_t block_mode)</td></tr>
<tr class="memdesc:ga01fc0d92035beec6b18d4467d8c58970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the context level CoAP block handling bits for handling RFC7959.  <br /></td></tr>
<tr class="separator:ga01fc0d92035beec6b18d4467d8c58970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5bc45ae12524c5368d0c06f4d890472f" id="r_ga5bc45ae12524c5368d0c06f4d890472f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__block.html#ga5bc45ae12524c5368d0c06f4d890472f">coap_context_set_max_block_size</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, size_t max_block_size)</td></tr>
<tr class="memdesc:ga5bc45ae12524c5368d0c06f4d890472f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the context level maximum block size that the server supports when sending or receiving packets with Block1 or Block2 options.  <br /></td></tr>
<tr class="separator:ga5bc45ae12524c5368d0c06f4d890472f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API for handling PDUs using CoAP Block options (RFC7959) </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaac86266e48cc25a1ba8640e058b3d3ee" name="gaac86266e48cc25a1ba8640e058b3d3ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac86266e48cc25a1ba8640e058b3d3ee">&#9670;&#160;</a></span>COAP_BLOCK_NO_PREEMPTIVE_RTAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_NO_PREEMPTIVE_RTAG&#160;&#160;&#160;0x10 /* (cl) Don't use pre-emptive Request-Tags */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00065">65</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="gabb4e317d4398e41f4238479d361ba31f" name="gabb4e317d4398e41f4238479d361ba31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb4e317d4398e41f4238479d361ba31f">&#9670;&#160;</a></span>COAP_BLOCK_NOT_RANDOM_BLOCK1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_NOT_RANDOM_BLOCK1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">                                             0x80 <span class="comment">/* (svr)Disable server handling random order</span></div>
<div class="line"><span class="comment">                                             block1 */</span></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00068">68</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga665ff95d010e2d02b092573f66596927" name="ga665ff95d010e2d02b092573f66596927"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga665ff95d010e2d02b092573f66596927">&#9670;&#160;</a></span>COAP_BLOCK_SINGLE_BODY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_SINGLE_BODY&#160;&#160;&#160;0x02 /* Deliver the data as a single body */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00062">62</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga3fcfc265023c5b4276da988265692810" name="ga3fcfc265023c5b4276da988265692810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3fcfc265023c5b4276da988265692810">&#9670;&#160;</a></span>COAP_BLOCK_STLESS_BLOCK2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_STLESS_BLOCK2&#160;&#160;&#160;0x40 /* (svr)Server is stateless for handling Block2 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00067">67</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga5a510f610b8753510b017e64052418a0" name="ga5a510f610b8753510b017e64052418a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a510f610b8753510b017e64052418a0">&#9670;&#160;</a></span>COAP_BLOCK_STLESS_FETCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_STLESS_FETCH&#160;&#160;&#160;0x20 /* (cl) Assume server supports stateless FETCH */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00066">66</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga4e6567cfe08602157b812ba85e6c090f" name="ga4e6567cfe08602157b812ba85e6c090f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e6567cfe08602157b812ba85e6c090f">&#9670;&#160;</a></span>COAP_BLOCK_TRY_Q_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_TRY_Q_BLOCK&#160;&#160;&#160;0x04 /* Try <a class="el" href="coap__net_8c.html#aedd6a61216a54973fc7db5272affee75">Q</a>-Block method */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00063">63</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="gaf8eced3c2de1f68126b8d6d95e694627" name="gaf8eced3c2de1f68126b8d6d95e694627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf8eced3c2de1f68126b8d6d95e694627">&#9670;&#160;</a></span>COAP_BLOCK_USE_LIBCOAP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_USE_LIBCOAP&#160;&#160;&#160;0x01 /* Use libcoap to do block requests */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00061">61</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga313c7b2a3ead6be40950a1fa0b1337b6" name="ga313c7b2a3ead6be40950a1fa0b1337b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga313c7b2a3ead6be40950a1fa0b1337b6">&#9670;&#160;</a></span>COAP_BLOCK_USE_M_Q_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_BLOCK_USE_M_Q_BLOCK&#160;&#160;&#160;0x08 /* Use M bit when recovering <a class="el" href="coap__net_8c.html#aedd6a61216a54973fc7db5272affee75">Q</a>-Block2 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00064">64</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga1a064effcefd02b9e5c8f99b297c0edc" name="ga1a064effcefd02b9e5c8f99b297c0edc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a064effcefd02b9e5c8f99b297c0edc">&#9670;&#160;</a></span>COAP_MAX_BLOCK_SZX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_MAX_BLOCK_SZX&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The largest value for the SZX component in a Block option. </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00036">36</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="gac0adbbc6858f203543ae19f840b79dca" name="gac0adbbc6858f203543ae19f840b79dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0adbbc6858f203543ae19f840b79dca">&#9670;&#160;</a></span>COAP_OPT_BLOCK_END_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_OPT_BLOCK_END_BYTE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">opt</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  ((<a class="code hl_function" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) &amp;&amp; <a class="code hl_function" href="group__opt__filter.html#gaec4e944d39722779cac610ed22ee09db">coap_opt_value</a>(opt)) ? \</div>
<div class="line">   *(<a class="code hl_function" href="group__opt__filter.html#gaec4e944d39722779cac610ed22ee09db">coap_opt_value</a>(opt) + (<a class="code hl_function" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt)-1)) : 0)</div>
<div class="ttc" id="agroup__opt__filter_html_ga42d0b9d068b790ec1c490a7fb2674904"><div class="ttname"><a href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a></div><div class="ttdeci">uint32_t coap_opt_length(const coap_opt_t *opt)</div><div class="ttdoc">Returns the length of the given option.</div><div class="ttdef"><b>Definition</b> <a href="coap__option_8c_source.html#l00212">coap_option.c:212</a></div></div>
<div class="ttc" id="agroup__opt__filter_html_gaec4e944d39722779cac610ed22ee09db"><div class="ttname"><a href="group__opt__filter.html#gaec4e944d39722779cac610ed22ee09db">coap_opt_value</a></div><div class="ttdeci">const uint8_t * coap_opt_value(const coap_opt_t *opt)</div><div class="ttdoc">Returns a pointer to the value of the given option.</div><div class="ttdef"><b>Definition</b> <a href="coap__option_8c_source.html#l00249">coap_option.c:249</a></div></div>
</div><!-- fragment -->
<p>Returns the value of the last byte of <code>opt</code>. </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00080">80</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="gad7d63d1ac6f4e326be162f5fb1ee48d9" name="gad7d63d1ac6f4e326be162f5fb1ee48d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7d63d1ac6f4e326be162f5fb1ee48d9">&#9670;&#160;</a></span>COAP_OPT_BLOCK_LAST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_OPT_BLOCK_LAST</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">opt</td><td>)</td>
          <td>&#160;&#160;&#160;  (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) ? (<a class="el" href="group__opt__filter.html#gaec4e944d39722779cac610ed22ee09db">coap_opt_value</a>(opt) + (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt)-1)) : 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the value of the least significant byte of a Block option <code>opt</code>. </p>
<p>For zero-length options (i.e. num == m == szx == 0), COAP_OPT_BLOCK_LAST returns <code>NULL</code>. </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00076">76</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga9e87e4bbd861945d9d1cc672c781662b" name="ga9e87e4bbd861945d9d1cc672c781662b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e87e4bbd861945d9d1cc672c781662b">&#9670;&#160;</a></span>COAP_OPT_BLOCK_MORE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_OPT_BLOCK_MORE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">opt</td><td>)</td>
          <td>&#160;&#160;&#160;  (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) ? (<a class="el" href="group__block.html#gac0adbbc6858f203543ae19f840b79dca">COAP_OPT_BLOCK_END_BYTE</a>(opt) &amp; 0x08) : 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the value of the More-bit of a Block option <code>opt</code>. </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00085">85</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="ga3b14a086973dff06815f999b6c873429" name="ga3b14a086973dff06815f999b6c873429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3b14a086973dff06815f999b6c873429">&#9670;&#160;</a></span>COAP_OPT_BLOCK_SZX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_OPT_BLOCK_SZX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">opt</td><td>)</td>
          <td>&#160;&#160;&#160;  (<a class="el" href="group__opt__filter.html#ga42d0b9d068b790ec1c490a7fb2674904">coap_opt_length</a>(opt) ? (<a class="el" href="group__block.html#gac0adbbc6858f203543ae19f840b79dca">COAP_OPT_BLOCK_END_BYTE</a>(opt) &amp; 0x07) : 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the value of the SZX-field of a Block option <code>opt</code>. </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00089">89</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga835a174fcf1b21cc213c7d99efb4b68a" name="ga835a174fcf1b21cc213c7d99efb4b68a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga835a174fcf1b21cc213c7d99efb4b68a">&#9670;&#160;</a></span>coap_release_large_data_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* coap_release_large_data_t) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, void *app_ptr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback handler for de-allocating the data based on <code>app_ptr</code> provided to coap_add_data_large_*() functions following transmission of the supplied data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The session that this data is associated with </td></tr>
    <tr><td class="paramname">app_ptr</td><td>The application provided pointer provided to the coap_add_data_large_* functions. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00286">286</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga73094dc713e61b72cec8e37ffaf72a39" name="ga73094dc713e61b72cec8e37ffaf72a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga73094dc713e61b72cec8e37ffaf72a39">&#9670;&#160;</a></span>coap_add_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int coap_add_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>block_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>block_szx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the <code>block_num</code> block of size 1 &lt;&lt; (<code>block_szx</code> + 4) from source <code>data</code> to <code>pdu</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pdu</td><td>The message to add the block. </td></tr>
    <tr><td class="paramname">len</td><td>The length of <code>data</code>. </td></tr>
    <tr><td class="paramname">data</td><td>The source data to fill the block with. </td></tr>
    <tr><td class="paramname">block_num</td><td>The actual block number. </td></tr>
    <tr><td class="paramname">block_szx</td><td>Encoded size of block <code>block_number</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> on success, <code>0</code> otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00230">230</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_ga73094dc713e61b72cec8e37ffaf72a39_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block_ga73094dc713e61b72cec8e37ffaf72a39_icgraph.svg" width="363" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga5d021b08e7774a54d635cc049aa491f7" name="ga5d021b08e7774a54d635cc049aa491f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d021b08e7774a54d635cc049aa491f7">&#9670;&#160;</a></span>coap_add_block_b_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int coap_add_block_b_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the appropriate payload data of the body to the <code>pdu</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pdu</td><td>The message to add the block. </td></tr>
    <tr><td class="paramname">len</td><td>The length of <code>data</code>. </td></tr>
    <tr><td class="paramname">data</td><td>The source data to fill the block with. </td></tr>
    <tr><td class="paramname">block</td><td>The block information (including potentially BERT)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> on success, <code>0</code> otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00244">244</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_ga5d021b08e7774a54d635cc049aa491f7_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga870799d383b3d3392ca711bd7dce467b" name="ga870799d383b3d3392ca711bd7dce467b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga870799d383b3d3392ca711bd7dce467b">&#9670;&#160;</a></span>coap_add_data_blocked_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void coap_add_data_blocked_response </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>media_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the appropriate part of <code>data</code> to the <code>response</code> pdu. </p>
<p>If blocks are required, then the appropriate block will be added to the PDU and sent. Adds a ETag option that is the hash of the entire data if the data is to be split into blocks Used by a request handler.</p>
<p>Note: The application will get called for every packet of a large body to process. Consider using coap_add_data_response_large() instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>The requesting pdu. </td></tr>
    <tr><td class="paramname">response</td><td>The response pdu. </td></tr>
    <tr><td class="paramname">media_type</td><td>The format of the data. </td></tr>
    <tr><td class="paramname">maxage</td><td>The maxmimum life of the data. If <code>-1</code>, then there is no maxage. </td></tr>
    <tr><td class="paramname">length</td><td>The total length of the data. </td></tr>
    <tr><td class="paramname">data</td><td>The entire data block to transmit. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00269">269</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_ga870799d383b3d3392ca711bd7dce467b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga4095674c01f0b924820b077ee159deeb" name="ga4095674c01f0b924820b077ee159deeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4095674c01f0b924820b077ee159deeb">&#9670;&#160;</a></span>coap_add_data_large_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_add_data_large_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__session__t.html">coap_session_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__block.html#ga835a174fcf1b21cc213c7d99efb4b68a">coap_release_large_data_t</a>&#160;</td>
          <td class="paramname"><em>release_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associates given data with the <code>pdu</code> that is passed as second parameter. </p>
<p>This function will fail if data has already been added to the <code>pdu</code>.</p>
<p>If all the data can be transmitted in a single PDU, this is functionally the same as <a class="el" href="group__pdu.html#gaf71a3f810ab9f0f657c25c425826af40" title="Adds given data to the pdu that is passed as first parameter.">coap_add_data()</a> except <code>release_func</code> (if not NULL) will get invoked after data transmission.</p>
<p>Used for a client request.</p>
<p>If the data spans multiple PDUs, then the data will get transmitted using (Q-)Block1 option with the addition of the Size1 and Request-Tag options. The underlying library will handle the transmission of the individual blocks. Once the body of data has been transmitted (or a failure occurred), then <code>release_func</code> (if not NULL) will get called so the application can de-allocate the <code>data</code> based on <code>app_data</code>. It is the responsibility of the application not to change the contents of <code>data</code> until the data transfer has completed.</p>
<p>There is no need for the application to include the (Q-)Block1 option in the <code>pdu</code>.</p>
<p><a class="el" href="group__block.html#ga4095674c01f0b924820b077ee159deeb" title="Associates given data with the pdu that is passed as second parameter.">coap_add_data_large_request()</a> (or the alternative coap_add_data_large_*() functions) must be called only once per PDU and must be the last PDU update before the PDU is transmitted. The (potentially) initial data will get transmitted when <a class="el" href="group__context.html#ga1c3d60f40aa03a974b4472951abae1f0" title="Sends a CoAP message to given peer.">coap_send()</a> is invoked.</p>
<p>Note: COAP_BLOCK_USE_LIBCOAP must be set by <a class="el" href="group__block.html#ga01fc0d92035beec6b18d4467d8c58970" title="Set the context level CoAP block handling bits for handling RFC7959.">coap_context_set_block_mode()</a> for libcoap to work correctly when using this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The session to associate the data with. </td></tr>
    <tr><td class="paramname">pdu</td><td>The PDU to associate the data with. </td></tr>
    <tr><td class="paramname">length</td><td>The length of data to transmit. </td></tr>
    <tr><td class="paramname">data</td><td>The data to transmit. </td></tr>
    <tr><td class="paramname">release_func</td><td>The function to call to de-allocate <code>data</code> or <code>NULL</code> if the function is not required. </td></tr>
    <tr><td class="paramname">app_ptr</td><td>A Pointer that the application can provide for when release_func() is called.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if addition is successful, else <code>0</code>. </dd></dl>

</div>
</div>
<a id="ga08fe64e0be673752c1686be58d43cc48" name="ga08fe64e0be673752c1686be58d43cc48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08fe64e0be673752c1686be58d43cc48">&#9670;&#160;</a></span>coap_add_data_large_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_add_data_large_response </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *&#160;</td>
          <td class="paramname"><em>resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__session__t.html">coap_session_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__string__t.html">coap_string_t</a> *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>media_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>etag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__block.html#ga835a174fcf1b21cc213c7d99efb4b68a">coap_release_large_data_t</a>&#160;</td>
          <td class="paramname"><em>release_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>app_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associates given data with the <code>response</code> pdu that is passed as fourth parameter. </p>
<p>This function will fail if data has already been added to the <code>pdu</code>.</p>
<p>If all the data can be transmitted in a single PDU, this is functionally the same as <a class="el" href="group__pdu.html#gaf71a3f810ab9f0f657c25c425826af40" title="Adds given data to the pdu that is passed as first parameter.">coap_add_data()</a> except <code>release_func</code> (if not NULL) will get invoked after data transmission. The Content-Format, Max-Age and ETag options may be added in as appropriate.</p>
<p>Used by a server request handler to create the response.</p>
<p>If the data spans multiple PDUs, then the data will get transmitted using (Q-)Block2 (response) option with the addition of the Size2 and ETag options. The underlying library will handle the transmission of the individual blocks. Once the body of data has been transmitted (or a failure occurred), then <code>release_func</code> (if not NULL) will get called so the application can de-allocate the <code>data</code> based on <code>app_data</code>. It is the responsibility of the application not to change the contents of <code>data</code> until the data transfer has completed.</p>
<p>There is no need for the application to include the (Q-)Block2 option in the <code>pdu</code>.</p>
<p><a class="el" href="group__block.html#ga08fe64e0be673752c1686be58d43cc48" title="Associates given data with the response pdu that is passed as fourth parameter.">coap_add_data_large_response()</a> (or the alternative coap_add_data_large_*() functions) must be called only once per PDU and must be the last PDU update before returning from the request handler function.</p>
<p>Note: COAP_BLOCK_USE_LIBCOAP must be set by <a class="el" href="group__block.html#ga01fc0d92035beec6b18d4467d8c58970" title="Set the context level CoAP block handling bits for handling RFC7959.">coap_context_set_block_mode()</a> for libcoap to work correctly when using this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resource</td><td>The resource the data is associated with. </td></tr>
    <tr><td class="paramname">session</td><td>The coap session. </td></tr>
    <tr><td class="paramname">request</td><td>The requesting pdu. </td></tr>
    <tr><td class="paramname">response</td><td>The response pdu. </td></tr>
    <tr><td class="paramname">query</td><td>The query taken from the (original) requesting pdu. </td></tr>
    <tr><td class="paramname">media_type</td><td>The content format of the data. </td></tr>
    <tr><td class="paramname">maxage</td><td>The maxmimum life of the data. If <code>-1</code>, then there is no maxage. </td></tr>
    <tr><td class="paramname">etag</td><td>ETag to use if not 0. </td></tr>
    <tr><td class="paramname">length</td><td>The total length of the data. </td></tr>
    <tr><td class="paramname">data</td><td>The entire data block to transmit. </td></tr>
    <tr><td class="paramname">release_func</td><td>The function to call to de-allocate <code>data</code> or NULL if the function is not required. </td></tr>
    <tr><td class="paramname">app_ptr</td><td>A Pointer that the application can provide for when release_func() is called.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if addition is successful, else <code>0</code>. </dd></dl>

</div>
</div>
<a id="gaf7f4a656ce3911d46e03504b503643d6" name="gaf7f4a656ce3911d46e03504b503643d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf7f4a656ce3911d46e03504b503643d6">&#9670;&#160;</a></span>coap_block_build_body()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcoap__binary__t.html">coap_binary_t</a> * coap_block_build_body </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__binary__t.html">coap_binary_t</a> *&#160;</td>
          <td class="paramname"><em>body_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>total</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-assemble payloads into a body. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">body_data</td><td>The pointer to the data for the body holding the representation so far or NULL if the first time. </td></tr>
    <tr><td class="paramname">length</td><td>The length of <code>data</code>. </td></tr>
    <tr><td class="paramname">data</td><td>The payload data to update the body with. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset of the <code>data</code> into the body. </td></tr>
    <tr><td class="paramname">total</td><td>The estimated total size of the body.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current representation of the body or <code>NULL</code> if error. If NULL, <code>body_data</code> will have been de-allocated. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l03631">3631</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_gaf7f4a656ce3911d46e03504b503643d6_cgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga01fc0d92035beec6b18d4467d8c58970" name="ga01fc0d92035beec6b18d4467d8c58970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01fc0d92035beec6b18d4467d8c58970">&#9670;&#160;</a></span>coap_context_set_block_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void coap_context_set_block_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the context level CoAP block handling bits for handling RFC7959. </p>
<p>These bits flow down to a session when a session is created and if the peer does not support something, an appropriate bit may get disabled in the session block_mode. The session block_mode then flows down into coap_crcv_t or coap_srcv_t where again an appropriate bit may get disabled.</p>
<p>Note: This function must be called before the session is set up.</p>
<p>Note: COAP_BLOCK_USE_LIBCOAP must be set if libcoap is to do all the block tracking and requesting, otherwise the application will have to do all of this work (the default if <a class="el" href="group__block.html#ga01fc0d92035beec6b18d4467d8c58970" title="Set the context level CoAP block handling bits for handling RFC7959.">coap_context_set_block_mode()</a> is not called).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The <a class="el" href="structcoap__context__t.html" title="The CoAP stack&#39;s global state is stored in a coap_context_t object.">coap_context_t</a> object. </td></tr>
    <tr><td class="paramname">block_mode</td><td>Zero or more COAP_BLOCK_ or'd options </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00375">375</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block_ga01fc0d92035beec6b18d4467d8c58970_cgraph.svg" width="460" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga5bc45ae12524c5368d0c06f4d890472f" name="ga5bc45ae12524c5368d0c06f4d890472f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5bc45ae12524c5368d0c06f4d890472f">&#9670;&#160;</a></span>coap_context_set_max_block_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_context_set_max_block_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_block_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the context level maximum block size that the server supports when sending or receiving packets with Block1 or Block2 options. </p>
<p>This maximum block size flows down to a session when a session is created.</p>
<p>Note: This function must be called before the session is set up.</p>
<p>Note: COAP_BLOCK_USE_LIBCOAP must be set using <a class="el" href="group__block.html#ga01fc0d92035beec6b18d4467d8c58970" title="Set the context level CoAP block handling bits for handling RFC7959.">coap_context_set_block_mode()</a> if libcoap is to do this work.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The <a class="el" href="structcoap__context__t.html" title="The CoAP stack&#39;s global state is stored in a coap_context_t object.">coap_context_t</a> object. </td></tr>
    <tr><td class="paramname">max_block_size</td><td>The maximum block size a server supports. Can be 0 (reset), or must be 16, 32, 64, 128, 256, 512 or 1024. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00397">397</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block_ga5bc45ae12524c5368d0c06f4d890472f_cgraph.svg" width="656" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gab4948cbc673c565b3eba270c5f784db3" name="gab4948cbc673c565b3eba270c5f784db3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4948cbc673c565b3eba270c5f784db3">&#9670;&#160;</a></span>coap_get_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int coap_get_block </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a>&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__block__t.html">coap_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes <code>block</code> from <code>pdu</code>. </p>
<p><code>number</code> must be either COAP_OPTION_BLOCK1 or COAP_OPTION_BLOCK2. When option <code>number</code> was found in <code>pdu</code>, <code>block</code> is initialized with values from this option and the function returns the value <code>1</code>. Otherwise, <code>0</code> is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pdu</td><td>The pdu to search for option <code>number</code>. </td></tr>
    <tr><td class="paramname">number</td><td>The option number to search for (must be COAP_OPTION_BLOCK1 or COAP_OPTION_BLOCK2). </td></tr>
    <tr><td class="paramname">block</td><td>The block structure to initialize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> on success, <code>0</code> otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00107">107</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_gab4948cbc673c565b3eba270c5f784db3_cgraph.svg" width="100%" height="599"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block_gab4948cbc673c565b3eba270c5f784db3_icgraph.svg" width="359" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga9791ef236293c2e629f98b2d2a7af478" name="ga9791ef236293c2e629f98b2d2a7af478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9791ef236293c2e629f98b2d2a7af478">&#9670;&#160;</a></span>coap_get_block_b()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int coap_get_block_b </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcoap__session__t.html">coap_session_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a>&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes <code>block</code> from <code>pdu</code>. </p>
<p><code>number</code> must be either COAP_OPTION_BLOCK1 or COAP_OPTION_BLOCK2. When option <code>number</code> was found in <code>pdu</code>, <code>block</code> is initialized with values from this option and the function returns the value <code>1</code>. Otherwise, <code>0</code> is returned. BERT information is abstracted as appropriate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>THe session that the pdu is associated with, </td></tr>
    <tr><td class="paramname">pdu</td><td>The pdu to search for option <code>number</code>. </td></tr>
    <tr><td class="paramname">number</td><td>The option number to search for (must be COAP_OPTION_BLOCK1 or COAP_OPTION_BLOCK2). </td></tr>
    <tr><td class="paramname">block</td><td>The block structure to initialize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> on success, <code>0</code> otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00054">54</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_ga9791ef236293c2e629f98b2d2a7af478_cgraph.svg" width="100%" height="599"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_ga9791ef236293c2e629f98b2d2a7af478_icgraph.svg" width="100%" height="504"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gaa67d14fa889f79afee9762dab7fc83e4" name="gaa67d14fa889f79afee9762dab7fc83e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa67d14fa889f79afee9762dab7fc83e4">&#9670;&#160;</a></span>coap_more_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libcoap_8h.html#a58b4446dccd0b8c21b3532ef6b77a57d">COAP_STATIC_INLINE</a> int coap_more_blocks </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>szx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if more than <code>num</code> blocks are required to deliver <code>data_len</code> bytes of data for a block size of 1 &lt;&lt; (<code>szx</code> + 4). </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8h_source.html#l00102">102</a> of file <a class="el" href="coap__block_8h_source.html">coap_block.h</a>.</p>

</div>
</div>
<a id="gaac6c90297abc6e2da80a6212b0d10e99" name="gaac6c90297abc6e2da80a6212b0d10e99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac6c90297abc6e2da80a6212b0d10e99">&#9670;&#160;</a></span>coap_opt_block_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int coap_opt_block_num </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coap__option_8h.html#a963ad4994625360a5ac70d9df2ab5412">coap_opt_t</a> *&#160;</td>
          <td class="paramname"><em>block_opt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the value of field <code>num</code> in the given block option <code>block_opt</code>. </p>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00035">35</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block_gaac6c90297abc6e2da80a6212b0d10e99_cgraph.svg" width="396" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_gaac6c90297abc6e2da80a6212b0d10e99_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga6e5de6865934ed03e6d150c95acfdc97" name="ga6e5de6865934ed03e6d150c95acfdc97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e5de6865934ed03e6d150c95acfdc97">&#9670;&#160;</a></span>coap_write_block_b_opt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int coap_write_block_b_opt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__session__t.html">coap_session_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__block__b__t.html">coap_block_b_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a>&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a block option of type <code>number</code> to message <code>pdu</code>. </p>
<p>If the requested block size is too large to fit in <code>pdu</code>, it is reduced accordingly. An exception is made for the final block when less space is required. The actual length of the resource is specified in <code>data_length</code>.</p>
<p>This function may change *block to reflect the values written to <code>pdu</code>. As the function takes into consideration the remaining space <code>pdu</code>, no more options should be added after <a class="el" href="group__block.html#gae1451ec6a5dcc209ed79d6e571fb42fc" title="Writes a block option of type number to message pdu.">coap_write_block_opt()</a> has returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The CoAP session. </td></tr>
    <tr><td class="paramname">block</td><td>The block structure to use. On return, this object is updated according to the values that have been written to <code>pdu</code>. </td></tr>
    <tr><td class="paramname">number</td><td>COAP_OPTION_BLOCK1 or COAP_OPTION_BLOCK2. </td></tr>
    <tr><td class="paramname">pdu</td><td>The message where the block option should be written. </td></tr>
    <tr><td class="paramname">data_length</td><td>The length of the actual data that will be added the <code>pdu</code> by calling <a class="el" href="group__block.html#ga73094dc713e61b72cec8e37ffaf72a39" title="Adds the block_num block of size 1 &lt;&lt; (block_szx + 4) from source data to pdu.">coap_add_block()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> on success, or a negative value on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00199">199</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_ga6e5de6865934ed03e6d150c95acfdc97_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gae1451ec6a5dcc209ed79d6e571fb42fc" name="gae1451ec6a5dcc209ed79d6e571fb42fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1451ec6a5dcc209ed79d6e571fb42fc">&#9670;&#160;</a></span>coap_write_block_opt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int coap_write_block_opt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__block__t.html">coap_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="coap__option_8h.html#a8b01554db860b8c67a08ff2db5119fc9">coap_option_num_t</a>&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__pdu__t.html">coap_pdu_t</a> *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a block option of type <code>number</code> to message <code>pdu</code>. </p>
<p>If the requested block size is too large to fit in <code>pdu</code>, it is reduced accordingly. An exception is made for the final block when less space is required. The actual length of the resource is specified in <code>data_length</code>.</p>
<p>This function may change *block to reflect the values written to <code>pdu</code>. As the function takes into consideration the remaining space <code>pdu</code>, no more options should be added after <a class="el" href="group__block.html#gae1451ec6a5dcc209ed79d6e571fb42fc" title="Writes a block option of type number to message pdu.">coap_write_block_opt()</a> has returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>The block structure to use. On return, this object is updated according to the values that have been written to <code>pdu</code>. </td></tr>
    <tr><td class="paramname">number</td><td>COAP_OPTION_BLOCK1 or COAP_OPTION_BLOCK2. </td></tr>
    <tr><td class="paramname">pdu</td><td>The message where the block option should be written. </td></tr>
    <tr><td class="paramname">data_length</td><td>The length of the actual data that will be added the <code>pdu</code> by calling <a class="el" href="group__block.html#ga73094dc713e61b72cec8e37ffaf72a39" title="Adds the block_num block of size 1 &lt;&lt; (block_szx + 4) from source data to pdu.">coap_add_block()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> on success, or a negative value on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__block_8c_source.html#l00166">166</a> of file <a class="el" href="coap__block_8c_source.html">coap_block.c</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__block_gae1451ec6a5dcc209ed79d6e571fb42fc_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__block_gae1451ec6a5dcc209ed79d6e571fb42fc_icgraph.svg" width="399" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Sep 7 2024 00:02:05 for libcoap by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
