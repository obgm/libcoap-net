<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoap: coap_pdu_get_type(3)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcoap<span id="projectnumber">&#160;4.3.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('man_coap_pdu_get_type.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">coap_pdu_get_type(3)</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>coap_pdu_access</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="idm1"></a><div class="titlepage"></div><div class="refnamediv"><h2>NAME</h2><p><a href="man_coap_pdu_access.html#coap_pdu_access" target="_self">coap_pdu_access</a>, <a href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a>, <a href="man_coap_decode_var_bytes.html#coap_decode_var_bytes" target="_self">coap_decode_var_bytes</a>, <a href="man_coap_decode_var_bytes8.html#coap_decode_var_bytes8" target="_self">coap_decode_var_bytes8</a>, <a href="man_coap_get_data.html#coap_get_data" target="_self">coap_get_data</a>, <a href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a>, <a href="man_coap_opt_value.html#coap_opt_value" target="_self">coap_opt_value</a>, <a href="man_coap_option_filter_clear.html#coap_option_filter_clear" target="_self">coap_option_filter_clear</a>, <a href="man_coap_option_filter_get.html#coap_option_filter_get" target="_self">coap_option_filter_get</a>, <a href="man_coap_option_filter_set.html#coap_option_filter_set" target="_self">coap_option_filter_set</a>, <a href="man_coap_option_filter_unset.html#coap_option_filter_unset" target="_self">coap_option_filter_unset</a>, <a href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a>, <a href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a>, <a href="man_coap_pdu_get_code.html#coap_pdu_get_code" target="_self">coap_pdu_get_code</a>, <a href="man_coap_pdu_get_mid.html#coap_pdu_get_mid" target="_self">coap_pdu_get_mid</a>, <a href="man_coap_pdu_get_token.html#coap_pdu_get_token" target="_self">coap_pdu_get_token</a>, <a href="man_coap_pdu_get_type.html#coap_pdu_get_type" target="_self"><span class="man-highlight">coap_pdu_get_type</span></a>, <a href="man_coap_get_uri_path.html#coap_get_uri_path" target="_self">coap_get_uri_path</a> - Accessing CoAP PDUs </p></div><div class="refsynopsisdiv"><a id="_synopsis"></a><h2>SYNOPSIS</h2><p><span class="strong"><strong>#include &lt;coap3/coap.h&gt;</strong></span></p><p><span class="strong"><strong>coap_opt_t *<a class="st-synopsis" href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>,
coap_option_num_t <span class="emphasis"><em>number</em></span>, coap_opt_iterator_t *<span class="emphasis"><em>oi</em></span>);</strong></span></p><p><span class="strong"><strong>unsigned int <a class="st-synopsis" href="man_coap_decode_var_bytes.html#coap_decode_var_bytes" target="_self">coap_decode_var_bytes</a>(const uint8_t *<span class="emphasis"><em>buf</em></span>, size_t <span class="emphasis"><em>length</em></span>);</strong></span></p><p><span class="strong"><strong>uint64_t <a class="st-synopsis" href="man_coap_decode_var_bytes8.html#coap_decode_var_bytes8" target="_self">coap_decode_var_bytes8</a>(const uint8_t *<span class="emphasis"><em>buf</em></span>, size_t <span class="emphasis"><em>length</em></span>);</strong></span></p><p><span class="strong"><strong>int <a class="st-synopsis" href="man_coap_get_data.html#coap_get_data" target="_self">coap_get_data</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>, size_t *<span class="emphasis"><em>length,
const uint8_t **_data</em></span>);</strong></span></p><p><span class="strong"><strong>uint32_t <a class="st-synopsis" href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a>(const coap_opt_t *<span class="emphasis"><em>opt</em></span>);</strong></span></p><p><span class="strong"><strong>const uint8_t *<a class="st-synopsis" href="man_coap_opt_value.html#coap_opt_value" target="_self">coap_opt_value</a>(const coap_opt_t *<span class="emphasis"><em>opt</em></span>);</strong></span></p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_option_filter_clear.html#coap_option_filter_clear" target="_self">coap_option_filter_clear</a>(coap_opt_filter_t *<span class="emphasis"><em>filter</em></span>);</strong></span></p><p><span class="strong"><strong>int <a class="st-synopsis" href="man_coap_option_filter_get.html#coap_option_filter_get" target="_self">coap_option_filter_get</a>(coap_opt_filter_t *<span class="emphasis"><em>filter</em></span>,
coap_option_num_t <span class="emphasis"><em>number</em></span>);</strong></span></p><p><span class="strong"><strong>int <a class="st-synopsis" href="man_coap_option_filter_set.html#coap_option_filter_set" target="_self">coap_option_filter_set</a>(coap_opt_filter_t *<span class="emphasis"><em>filter</em></span>,
coap_option_num_t <span class="emphasis"><em>number</em></span>)</strong></span>;</p><p><span class="strong"><strong>int <a class="st-synopsis" href="man_coap_option_filter_unset.html#coap_option_filter_unset" target="_self">coap_option_filter_unset</a>(coap_opt_filter_t *<span class="emphasis"><em>filter</em></span>,
coap_option_num_t <span class="emphasis"><em>number</em></span>);</strong></span></p><p><span class="strong"><strong>coap_opt_iterator_t *<a class="st-synopsis" href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>,
coap_opt_iterator_t *<span class="emphasis"><em>oi</em></span>, const coap_opt_filter_t *<span class="emphasis"><em>filter</em></span>);</strong></span></p><p><span class="strong"><strong>coap_opt_t *<a class="st-synopsis" href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a>(coap_opt_iterator_t *<span class="emphasis"><em>oi</em></span>);</strong></span></p><p><span class="strong"><strong>coap_pdu_code_t <a class="st-synopsis" href="man_coap_pdu_get_code.html#coap_pdu_get_code" target="_self">coap_pdu_get_code</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>);</strong></span></p><p><span class="strong"><strong>coap_mid_t <a class="st-synopsis" href="man_coap_pdu_get_mid.html#coap_pdu_get_mid" target="_self">coap_pdu_get_mid</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>);</strong></span></p><p><span class="strong"><strong>coap_bin_const_t <a class="st-synopsis" href="man_coap_pdu_get_token.html#coap_pdu_get_token" target="_self">coap_pdu_get_token</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>);</strong></span></p><p><span class="strong"><strong>coap_pdu_type_t <a class="st-synopsis" href="man_coap_pdu_get_type.html#coap_pdu_get_type" target="_self"><span class="man-highlight">coap_pdu_get_type</span></a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>);</strong></span></p><p><span class="strong"><strong>coap_string_t *<a class="st-synopsis" href="man_coap_get_uri_path.html#coap_get_uri_path" target="_self">coap_get_uri_path</a>(const coap_pdu_t *<span class="emphasis"><em>pdu</em></span>);</strong></span></p><p>For specific (D)TLS library support, link with
<span class="strong"><strong>-lcoap-3-notls</strong></span>, <span class="strong"><strong>-lcoap-3-gnutls</strong></span>,
<span class="strong"><strong>-lcoap-3-openssl</strong></span>, <span class="strong"><strong>-lcoap-3-mbedtls</strong></span>,
<span class="strong"><strong>-lcoap-3-wolfssl</strong></span>
or <span class="strong"><strong>-lcoap-3-tinydtls</strong></span>.   Otherwise, link with
<span class="strong"><strong>-lcoap-3</strong></span> to get the default (D)TLS library support.</p></div><div class="refsect1"><a id="_description"></a><h2>DESCRIPTION</h2><p>The CoAP PDU is of the form</p><p>--header--|--optional token--|--optional options--|--optional payload--</p><p>The terminology used is taken mainly from
"<a class="ulink" href="https://rfc-editor.org/rfc/rfc7252#section-1.2" target="_top">RFC7252 1.2. Terminology</a>".</p><p>The following functions provide access to the information held within
different parts of a PDU.</p></div><div class="refsect1"><a id="_pdu_header_functions"></a><h2>PDU HEADER FUNCTIONS</h2><p><span class="strong"><strong><a class="anchor" id="coap_pdu_get_type"></a>Function: <a href="man_coap_pdu_get_type.html#coap_pdu_get_type" target="_self"><span class="man-highlight">coap_pdu_get_type</span></a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_type.html#coap_pdu_get_type" target="_self"><span class="man-highlight">coap_pdu_get_type</span></a></strong></span>() function returns one of the messages types below from
the PDU <span class="emphasis"><em>pdu</em></span> header.</p><pre class="programlisting">COAP_MESSAGE_CON  Type confirmable.
COAP_MESSAGE_NON  Type non-confirmable.
COAP_MESSAGE_ACK  Type acknowledge
COAP_MESSAGE_RST  Type reset.</pre><p><span class="strong"><strong>NOTE:</strong></span> For reliable messages <a class="ulink" href="https://rfc-editor.org/rfc/rfc8323" target="_top">RFC8323</a>,
this will always return COAP_MESSAGE_CON.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_pdu_get_code.html#coap_pdu_get_code" target="_self">coap_pdu_get_code</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_code.html#coap_pdu_get_code" target="_self">coap_pdu_get_code</a></strong></span>() function returns one of the codes below from the
PDU <span class="emphasis"><em>pdu</em></span> header. It is possible that new codes are added in over time.</p><pre class="programlisting">COAP_EMPTY_CODE                               0.00
COAP_REQUEST_CODE_GET                         0.01
COAP_REQUEST_CODE_POST                        0.02
COAP_REQUEST_CODE_PUT                         0.03
COAP_REQUEST_CODE_DELETE                      0.04
COAP_REQUEST_CODE_FETCH                       0.05
COAP_REQUEST_CODE_PATCH                       0.06
COAP_REQUEST_CODE_IPATCH                      0.07
COAP_RESPONSE_CODE_OK                         2.00
COAP_RESPONSE_CODE_CREATED                    2.01
COAP_RESPONSE_CODE_DELETED                    2.02
COAP_RESPONSE_CODE_VALID                      2.03
COAP_RESPONSE_CODE_CHANGED                    2.04
COAP_RESPONSE_CODE_CONTENT                    2.05
COAP_RESPONSE_CODE_CONTINUE                   2.31
COAP_RESPONSE_CODE_BAD_REQUEST                4.00
COAP_RESPONSE_CODE_UNAUTHORIZED               4.01
COAP_RESPONSE_CODE_BAD_OPTION                 4.02
COAP_RESPONSE_CODE_FORBIDDEN                  4.03
COAP_RESPONSE_CODE_NOT_FOUND                  4.04
COAP_RESPONSE_CODE_NOT_ALLOWED                4.05
COAP_RESPONSE_CODE_NOT_ACCEPTABLE             4.06
COAP_RESPONSE_CODE_INCOMPLETE                 4.08
COAP_RESPONSE_CODE_CONFLICT                   4.09
COAP_RESPONSE_CODE_PRECONDITION_FAILED        4.12
COAP_RESPONSE_CODE_REQUEST_TOO_LARGE          4.13
COAP_RESPONSE_CODE_UNSUPPORTED_CONTENT_FORMAT 4.15
COAP_RESPONSE_CODE_UNPROCESSABLE              4.22
COAP_RESPONSE_CODE_TOO_MANY_REQUESTS          4.29
COAP_RESPONSE_CODE_INTERNAL_ERROR             5.00
COAP_RESPONSE_CODE_NOT_IMPLEMENTED            5.01
COAP_RESPONSE_CODE_BAD_GATEWAY                5.02
COAP_RESPONSE_CODE_SERVICE_UNAVAILABLE        5.03
COAP_RESPONSE_CODE_GATEWAY_TIMEOUT            5.04
COAP_RESPONSE_CODE_PROXYING_NOT_SUPPORTED     5.05
COAP_RESPONSE_CODE_HOP_LIMIT_REACHED          5.08
COAP_SIGNALING_CODE_CSM                       7.01
COAP_SIGNALING_CODE_PING                      7.02
COAP_SIGNALING_CODE_PONG                      7.03
COAP_SIGNALING_CODE_RELEASE                   7.04
COAP_SIGNALING_CODE_ABORT                     7.05</pre><p><span class="strong"><strong>NOTE:</strong></span> For reliable messages "ttps://rfc-editor.org/rfc/rfc8323[RFC8323],
this will always return COAP_EMPTY_CODE.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_pdu_get_mid.html#coap_pdu_get_mid" target="_self">coap_pdu_get_mid</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_mid.html#coap_pdu_get_mid" target="_self">coap_pdu_get_mid</a></strong></span>() returns the message id from the PDU <span class="emphasis"><em>pdu</em></span> header.</p><p><span class="strong"><strong>NOTE:</strong></span> For reliable messages <a class="ulink" href="https://rfc-editor.org/rfc/rfc8323" target="_top">RFC8323</a>,
this will always return 0.</p></div><div class="refsect1"><a id="_pdu_token_functions"></a><h2>PDU TOKEN FUNCTIONS</h2><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_pdu_get_token.html#coap_pdu_get_token" target="_self">coap_pdu_get_token</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_token.html#coap_pdu_get_token" target="_self">coap_pdu_get_token</a></strong></span>() returns the token information held in the PDU <span class="emphasis"><em>pdu</em></span>
token which may be zero length.</p></div><div class="refsect1"><a id="_pdu_options_functions"></a><h2>PDU OPTIONS FUNCTIONS</h2><p>The following is the current list of options with their numeric value</p><pre class="screen">/*
 * The C, U, and N flags indicate the properties
 * Critical, Unsafe, and NoCacheKey, respectively.
 * If U is set, then N has no meaning as per
 * https://rfc-editor.org/rfc/rfc7252#section-5.10
 * and is set to a -.
 * Separately, R is for the options that can be repeated
 *
 * The least significant byte of the option is set as followed
 * as per https://rfc-editor.org/rfc/rfc7252#section-5.4.6
 *
 *   0   1   2   3   4   5   6   7
 * --+---+---+---+---+---+---+---+
 *           | NoCacheKey| U | C |
 * --+---+---+---+---+---+---+---+
 *
 * https://rfc-editor.org/rfc/rfc8613#section-4 goes on to define E, I and U
 * properties Encrypted and Integrity Protected, Integrity Protected Only and
 * Unprotected respectively.  Integrity Protected Only is not currently used.
 *
 * An Option is tagged with CUNREIU with any of the letters replaced with _ if
 * not set, or - for N if U is set (see above) for aiding understanding of the
 * Option.
 */

COAP_OPTION_IF_MATCH        1 /* C__RE__, opaque,    0-8 B, RFC7252 */
COAP_OPTION_URI_HOST        3 /* CU-___U, String,  1-255 B, RFC7252 */
COAP_OPTION_ETAG            4 /* ___RE__, opaque,    1-8 B, RFC7252 */
COAP_OPTION_IF_NONE_MATCH   5 /* C___E__, empty,       0 B, RFC7252 */
COAP_OPTION_OBSERVE         6 /* _U-_E_U, empty/uint,  0 B/0-3 B, RFC7641 */
COAP_OPTION_URI_PORT        7 /* CU-___U, uint,      0-2 B, RFC7252 */
COAP_OPTION_LOCATION_PATH   8 /* ___RE__, String,  0-255 B, RFC7252 */
COAP_OPTION_OSCORE          9 /* C_____U, *,       0-255 B, RFC8613 */
COAP_OPTION_URI_PATH       11 /* CU-RE__, String,  0-255 B, RFC7252 */
COAP_OPTION_CONTENT_FORMAT 12 /* ____E__, uint,      0-2 B, RFC7252 */
/* COAP_OPTION_MAXAGE default 60 seconds if not set */
COAP_OPTION_MAXAGE         14 /* _U-_E_U, uint,      0-4 B, RFC7252 */
COAP_OPTION_URI_QUERY      15 /* CU-RE__, String,  1-255 B, RFC7252 */
COAP_OPTION_HOP_LIMIT      16 /* ______U, uint,        1 B, RFC8768 */
COAP_OPTION_ACCEPT         17 /* C___E__, uint,      0-2 B, RFC7252 */
COAP_OPTION_LOCATION_QUERY 20 /* ___RE__, String,  0-255 B, RFC7252 */
COAP_OPTION_BLOCK2         23 /* CU-_E_U, uint,      0-3 B, RFC7959 */
COAP_OPTION_BLOCK1         27 /* CU-_E_U, uint,      0-3 B, RFC7959 */
COAP_OPTION_SIZE2          28 /* __N_E_U, uint,      0-4 B, RFC7959 */
COAP_OPTION_PROXY_URI      35 /* CU-___U, String, 1-1034 B, RFC7252 */
COAP_OPTION_PROXY_SCHEME   39 /* CU-___U, String,  1-255 B, RFC7252 */
COAP_OPTION_SIZE1          60 /* __N_E_U, uint,      0-4 B, RFC7252 */
COAP_OPTION_NORESPONSE    258 /* _U-_E_U, uint,      0-1 B, RFC7967 */</pre><p>See FURTHER INFORMATION as to how to get the latest list.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a></strong></span>() function is used to check whether the specified option
<span class="emphasis"><em>number</em></span> is in the PDU <span class="emphasis"><em>pdu</em></span> options.  The option iterator <span class="emphasis"><em>oi</em></span> is used as a
scratch (does not need to be initialized) internal
storage location while iterating through the options looking for the specific
<span class="emphasis"><em>number</em></span>.  If the <span class="emphasis"><em>number</em></span> is repeated in the <span class="emphasis"><em>pdu</em></span>, only the first occurrence
will be returned.  If the option is not found, NULL is returned.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a></strong></span>() function can be used to
initialize option iterator <span class="emphasis"><em>oi</em></span>, applying a filter <span class="emphasis"><em>filter</em></span> to indicate which
options are to be ignored when iterating through the options.  The <span class="emphasis"><em>filter</em></span> can
be NULL (or COAP_OPT_ALL) if all of the options are required.
To set up the filter otherwise, the following 4 functions are available.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_option_filter_clear.html#coap_option_filter_clear" target="_self">coap_option_filter_clear</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_clear.html#coap_option_filter_clear" target="_self">coap_option_filter_clear</a></strong></span>() function initializes <span class="emphasis"><em>filter</em></span> to have no
options set.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_option_filter_get.html#coap_option_filter_get" target="_self">coap_option_filter_get</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_get.html#coap_option_filter_get" target="_self">coap_option_filter_get</a></strong></span>() function is used to check whether option <span class="emphasis"><em>number</em></span>
is set in <span class="emphasis"><em>filter</em></span>.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_option_filter_set.html#coap_option_filter_set" target="_self">coap_option_filter_set</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_set.html#coap_option_filter_set" target="_self">coap_option_filter_set</a></strong></span>() function is used to set option <span class="emphasis"><em>number</em></span> in
<span class="emphasis"><em>filter</em></span>.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_option_filter_unset.html#coap_option_filter_unset" target="_self">coap_option_filter_unset</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_unset.html#coap_option_filter_unset" target="_self">coap_option_filter_unset</a></strong></span>() function is used to remove option <span class="emphasis"><em>number</em></span> in
<span class="emphasis"><em>filter</em></span>.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a></strong></span>() function is then used following
<span class="strong"><strong><a class="st-desc" href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a></strong></span>() in a loop to return all
the appropriate options until NULL is returned - indicating the end of
the available options. See EXAMPLES below for further information.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a></strong></span>() function returns the length of the option <span class="emphasis"><em>opt</em></span>
(as returned by <span class="strong"><strong><a class="st-desc" href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a></strong></span>() or <span class="strong"><strong><a class="st-desc" href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a></strong></span>()).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_opt_value.html#coap_opt_value" target="_self">coap_opt_value</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_opt_value.html#coap_opt_value" target="_self">coap_opt_value</a></strong></span>() function returns a pointer to the start of the data for
the option <span class="emphasis"><em>opt</em></span> (as returned by <span class="strong"><strong><a class="st-desc" href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a></strong></span>() or <span class="strong"><strong><a class="st-desc" href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a></strong></span>()).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_decode_var_bytes.html#coap_decode_var_bytes" target="_self">coap_decode_var_bytes</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_decode_var_bytes.html#coap_decode_var_bytes" target="_self">coap_decode_var_bytes</a></strong></span>() function will decode an option value up to 4 bytes
long from <span class="emphasis"><em>buf</em></span> and <span class="emphasis"><em>length</em></span> into an unsigned 32bit number.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_decode_var_bytes8.html#coap_decode_var_bytes8" target="_self">coap_decode_var_bytes8</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_decode_var_bytes8.html#coap_decode_var_bytes8" target="_self">coap_decode_var_bytes8</a></strong></span>() function will decode an option value up to 8
bytes long from <span class="emphasis"><em>buf</em></span> and <span class="emphasis"><em>length</em></span> into an unsigned 64bit number.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_get_uri_path.html#coap_get_uri_path" target="_self">coap_get_uri_path</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_get_uri_path.html#coap_get_uri_path" target="_self">coap_get_uri_path</a></strong></span>() function will abstract the uri path from the
specified <span class="emphasis"><em>pdu</em></span> options. The returned uri path will need to be freed off when no longer required.</p></div><div class="refsect1"><a id="_pdu_payload_functions"></a><h2>PDU PAYLOAD FUNCTIONS</h2><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_get_data.html#coap_get_data" target="_self">coap_get_data</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_get_data.html#coap_get_data" target="_self">coap_get_data</a></strong></span>() function is used abstract from the <span class="emphasis"><em>pdu</em></span> payload
information about the received data by updating <span class="emphasis"><em>length</em></span> with the length of
data available, and <span class="emphasis"><em>data</em></span> with a pointer to where the data is located.</p><p><span class="strong"><strong>NOTE:</strong></span> This function has been updated by <span class="strong"><strong><a class="st-desc" href="man_coap_get_data_large.html#coap_get_data_large" target="_self">coap_get_data_large</a></strong></span>() when large
transfers may take place.  See <span class="strong"><strong><a class="st-desc" href="man_coap_block.html#coap_block" target="_self">coap_block</a></strong></span>(3).</p></div><div class="refsect1"><a id="_return_values"></a><h2>RETURN VALUES</h2><p><span class="strong"><strong><a class="st-desc" href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a></strong></span>() and <span class="strong"><strong><a class="st-desc" href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a></strong></span>() returns a coap_opt_t* or
NULL if not found.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_decode_var_bytes.html#coap_decode_var_bytes" target="_self">coap_decode_var_bytes</a></strong></span>() and <span class="strong"><strong><a class="st-desc" href="man_coap_decode_var_bytes8.html#coap_decode_var_bytes8" target="_self">coap_decode_var_bytes8</a></strong></span>() return the decoded
value.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_code.html#coap_pdu_get_code" target="_self">coap_pdu_get_code</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_mid.html#coap_pdu_get_mid" target="_self">coap_pdu_get_mid</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_type.html#coap_pdu_get_type" target="_self"><span class="man-highlight">coap_pdu_get_type</span></a></strong></span>() return
the appropriate value.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_get.html#coap_option_filter_get" target="_self">coap_option_filter_get</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_set.html#coap_option_filter_set" target="_self">coap_option_filter_set</a></strong></span>() and
<span class="strong"><strong><a class="st-desc" href="man_coap_option_filter_unset.html#coap_option_filter_unset" target="_self">coap_option_filter_unset</a></strong></span>() return 1 on success or 0 on failure.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_get_data.html#coap_get_data" target="_self">coap_get_data</a></strong></span>() returns 1 if data, else 0.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a></strong></span>() returns the option length.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_opt_value.html#coap_opt_value" target="_self">coap_opt_value</a></strong></span>() returns a pointer to the start of the option value or
NULL if error.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a></strong></span>() returns ap pointer to the provided iterator
or NULL on error.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_pdu_get_token.html#coap_pdu_get_token" target="_self">coap_pdu_get_token</a></strong></span>() returns a pointer to the token in the pdu.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_get_uri_path.html#coap_get_uri_path" target="_self">coap_get_uri_path</a></strong></span>() returns an allocated pointer to the uri path in the
pdu or NULL on error.  This pointer will need to be freed off.</p></div><div class="refsect1"><a id="_examples"></a><h2>EXAMPLES</h2><p><span class="strong"><strong>Abstract information from PDU</strong></span></p><pre class="programlisting">#include &lt;coap3/coap.h&gt;

static void
get_pdu_information(coap_pdu_t *pdu) {

  int ret;
  /* Header variables */
  coap_pdu_type_t pdu_type;
  coap_pdu_code_t pdu_code;
  coap_mid_t pdu_mid;
  /* Token variables */
  coap_bin_const_t pdu_token;
  /* Option variables */
  coap_opt_iterator_t opt_iter;
  coap_opt_t *option;
  coap_opt_filter_t ignore_options;

  /* Data payload variables */
  size_t pdu_data_length;
  const uint8_t *pdu_data;
  size_t pdu_data_offset;
  size_t pdu_data_total_length;

  /* Pull in the header information */
  pdu_type = <a href="man_coap_pdu_get_type.html#coap_pdu_get_type" target="_self"><span class="man-highlight">coap_pdu_get_type</span></a>(pdu);
  pdu_code = <a href="man_coap_pdu_get_code.html#coap_pdu_get_code" target="_self">coap_pdu_get_code</a>(pdu);
  pdu_mid = <a href="man_coap_pdu_get_mid.html#coap_pdu_get_mid" target="_self">coap_pdu_get_mid</a>(pdu);

  /* Pull in the token information */
  pdu_token = <a href="man_coap_pdu_get_token.html#coap_pdu_get_token" target="_self">coap_pdu_get_token</a>(pdu);

  /* Pull in the option information */
  /* Specific option check */
  option = <a href="man_coap_check_option.html#coap_check_option" target="_self">coap_check_option</a>(pdu, COAP_OPTION_OBSERVE, &amp;opt_iter);
  if (option) {
    uint32_t value = <a href="man_coap_decode_var_bytes.html#coap_decode_var_bytes" target="_self">coap_decode_var_bytes</a>(<a href="man_coap_opt_value.html#coap_opt_value" target="_self">coap_opt_value</a>(option),
                                           <a href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a>(option));
    <a href="man_coap_log_info.html#coap_log_info" target="_self">coap_log_info</a>("Option OBSERVE, value %u\n", value);
  }
  /* Iterate through all options */
  <a href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a>(pdu, &amp;opt_iter, COAP_OPT_ALL);
  while ((option = <a href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a>(&amp;opt_iter))) {
    <a href="man_coap_log_info.html#coap_log_info" target="_self">coap_log_info</a>("A: Option %d, Length %u\n",
                  opt_iter.number, <a href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a>(option));
  }
  /* Iterate through options, some ignored */
  <a href="man_coap_option_filter_clear.html#coap_option_filter_clear" target="_self">coap_option_filter_clear</a>(&amp;ignore_options);
  <a href="man_coap_option_filter_set.html#coap_option_filter_set" target="_self">coap_option_filter_set</a>(&amp;ignore_options, COAP_OPTION_OBSERVE);
  <a href="man_coap_option_iterator_init.html#coap_option_iterator_init" target="_self">coap_option_iterator_init</a>(pdu, &amp;opt_iter, &amp;ignore_options);
  while ((option = <a href="man_coap_option_next.html#coap_option_next" target="_self">coap_option_next</a>(&amp;opt_iter))) {
    <a href="man_coap_log_info.html#coap_log_info" target="_self">coap_log_info</a>("I: Option %d, Length %u\n",
                  opt_iter.number, <a href="man_coap_opt_length.html#coap_opt_length" target="_self">coap_opt_length</a>(option));
  }

  /* Pull in the payload information */
  ret = <a href="man_coap_get_data_large.html#coap_get_data_large" target="_self">coap_get_data_large</a>(pdu, &amp;pdu_data_length, &amp;pdu_data,
                            &amp;pdu_data_offset, &amp;pdu_data_total_length);

}</pre></div><div class="refsect1"><a id="_see_also"></a><h2>SEE ALSO</h2><p><span class="strong"><strong><a class="st-desc" href="man_coap_block.html#coap_block" target="_self">coap_block</a></strong></span>(3) and <span class="strong"><strong><a class="st-desc" href="man_coap_pdu_setup.html#coap_pdu_setup" target="_self">coap_pdu_setup</a></strong></span>(3)</p></div><div class="refsect1"><a id="_further_information"></a><h2>FURTHER INFORMATION</h2><p>See</p><p>"<a class="ulink" href="https://rfc-editor.org/rfc/rfc7252" target="_top">RFC7252: The Constrained Application Protocol (CoAP)</a>"</p><p>"<a class="ulink" href="https://rfc-editor.org/rfc/rfc8613" target="_top">RFC8613: Object Security for Constrained RESTful Environments (OSCORE)</a>"</p><p>for further information.</p><p>See
<a class="ulink" href="https://www.iana.org/assignments/core-parameters/core-parameters.xhtml#option-numbers" target="_top">https://www.iana.org/assignments/core-parameters/core-parameters.xhtml#option-numbers</a>
for the current set of defined CoAP Options.</p></div><div class="refsect1"><a id="_bugs"></a><h2>BUGS</h2><p>Please raise an issue on GitHub at
<a class="ulink" href="https://github.com/obgm/libcoap/issues" target="_top">https://github.com/obgm/libcoap/issues</a> to report any bugs.</p><p>Please raise a Pull Request at <a class="ulink" href="https://github.com/obgm/libcoap/pulls" target="_top">https://github.com/obgm/libcoap/pulls</a>
for any fixes.</p></div><div class="refsect1"><a id="_authors"></a><h2>AUTHORS</h2><p>The libcoap project &lt;<a class="ulink" href="mailto:libcoap-developers@lists.sourceforge.net" target="_top">libcoap-developers@lists.sourceforge.net</a>&gt;</p></div></div></body></html> coap_pdu_get_type(3)</p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Sep 7 2024 00:02:05 for libcoap by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
