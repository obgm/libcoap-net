<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoap: Application I/O Handling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcoap<span id="projectnumber">&#160;4.3.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__app__io.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Application I/O Handling<div class="ingroups"><a class="el" href="group__application__api.html">Application API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>API for Application Input / Output checking.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Application I/O Handling:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__app__io.svg" width="358" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaaf3b35c7e5cf130a712198ffd54fc5b1" id="r_gaaf3b35c7e5cf130a712198ffd54fc5b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#gaaf3b35c7e5cf130a712198ffd54fc5b1">COAP_IO_WAIT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gaaf3b35c7e5cf130a712198ffd54fc5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cdde699b060a89e5f6433b61cf0a0eb" id="r_ga8cdde699b060a89e5f6433b61cf0a0eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#ga8cdde699b060a89e5f6433b61cf0a0eb">COAP_IO_NO_WAIT</a>&#160;&#160;&#160;((uint32_t)-1)</td></tr>
<tr class="separator:ga8cdde699b060a89e5f6433b61cf0a0eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0acc0068f8442ab2fb70bc30242fc5ef" id="r_ga0acc0068f8442ab2fb70bc30242fc5ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#ga0acc0068f8442ab2fb70bc30242fc5ef">coap_io_process</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *ctx, uint32_t timeout_ms)</td></tr>
<tr class="memdesc:ga0acc0068f8442ab2fb70bc30242fc5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main I/O processing function.  <br /></td></tr>
<tr class="separator:ga0acc0068f8442ab2fb70bc30242fc5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa68c0208f033c5e0c4201a2d2d5e515f" id="r_gaa68c0208f033c5e0c4201a2d2d5e515f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#gaa68c0208f033c5e0c4201a2d2d5e515f">coap_io_process_with_fds</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *ctx, uint32_t timeout_ms, int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds)</td></tr>
<tr class="memdesc:gaa68c0208f033c5e0c4201a2d2d5e515f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main message processing loop with additional fds for internal select.  <br /></td></tr>
<tr class="separator:gaa68c0208f033c5e0c4201a2d2d5e515f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2023144481df2258b5947666a02ede6c" id="r_ga2023144481df2258b5947666a02ede6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#ga2023144481df2258b5947666a02ede6c">coap_io_pending</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context)</td></tr>
<tr class="memdesc:ga2023144481df2258b5947666a02ede6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check to see if there is any i/o pending for the <code>context</code>.  <br /></td></tr>
<tr class="separator:ga2023144481df2258b5947666a02ede6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6213c0f2f9c7365c439589374ec3c91b" id="r_ga6213c0f2f9c7365c439589374ec3c91b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#ga6213c0f2f9c7365c439589374ec3c91b">coap_io_prepare_io</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *ctx, <a class="el" href="structcoap__socket__t.html">coap_socket_t</a> *sockets[], unsigned int max_sockets, unsigned int *num_sockets, <a class="el" href="group__clock.html#ga97ff1502e211b4ee6c3f15a598833438">coap_tick_t</a> now)</td></tr>
<tr class="memdesc:ga6213c0f2f9c7365c439589374ec3c91b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates through all the <a class="el" href="structcoap__socket__t.html">coap_socket_t</a> structures embedded in endpoints or sessions associated with the <code>ctx</code> to determine which are wanting any read, write, accept or connect I/O (COAP_SOCKET_WANT_xxx is set).  <br /></td></tr>
<tr class="separator:ga6213c0f2f9c7365c439589374ec3c91b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec2083a94bd1f43582f981f3370e45dd" id="r_gaec2083a94bd1f43582f981f3370e45dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#gaec2083a94bd1f43582f981f3370e45dd">coap_io_do_io</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *ctx, <a class="el" href="group__clock.html#ga97ff1502e211b4ee6c3f15a598833438">coap_tick_t</a> now)</td></tr>
<tr class="memdesc:gaec2083a94bd1f43582f981f3370e45dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes any outstanding read, write, accept or connect I/O as indicated in the <a class="el" href="structcoap__socket__t.html">coap_socket_t</a> structures (COAP_SOCKET_CAN_xxx set) embedded in endpoints or sessions associated with <code>ctx</code>.  <br /></td></tr>
<tr class="separator:gaec2083a94bd1f43582f981f3370e45dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95cf986f7935247aca8bd20c8d7adb12" id="r_ga95cf986f7935247aca8bd20c8d7adb12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#ga95cf986f7935247aca8bd20c8d7adb12">coap_io_prepare_epoll</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *ctx, <a class="el" href="group__clock.html#ga97ff1502e211b4ee6c3f15a598833438">coap_tick_t</a> now)</td></tr>
<tr class="memdesc:ga95cf986f7935247aca8bd20c8d7adb12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Any now timed out delayed packet is transmitted, along with any packets associated with requested observable response.  <br /></td></tr>
<tr class="separator:ga95cf986f7935247aca8bd20c8d7adb12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae75a791665f7ae378bb27fcd2617c402" id="r_gae75a791665f7ae378bb27fcd2617c402"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__app__io.html#gae75a791665f7ae378bb27fcd2617c402">coap_io_do_epoll</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *ctx, struct epoll_event *events, size_t nevents)</td></tr>
<tr class="memdesc:gae75a791665f7ae378bb27fcd2617c402"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process all the epoll events.  <br /></td></tr>
<tr class="separator:gae75a791665f7ae378bb27fcd2617c402"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API for Application Input / Output checking. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga8cdde699b060a89e5f6433b61cf0a0eb" name="ga8cdde699b060a89e5f6433b61cf0a0eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8cdde699b060a89e5f6433b61cf0a0eb">&#9670;&#160;</a></span>COAP_IO_NO_WAIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_IO_NO_WAIT&#160;&#160;&#160;((uint32_t)-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__net_8h_source.html#l00631">631</a> of file <a class="el" href="coap__net_8h_source.html">coap_net.h</a>.</p>

</div>
</div>
<a id="gaaf3b35c7e5cf130a712198ffd54fc5b1" name="gaaf3b35c7e5cf130a712198ffd54fc5b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf3b35c7e5cf130a712198ffd54fc5b1">&#9670;&#160;</a></span>COAP_IO_WAIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_IO_WAIT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="coap__net_8h_source.html#l00630">630</a> of file <a class="el" href="coap__net_8h_source.html">coap_net.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae75a791665f7ae378bb27fcd2617c402" name="gae75a791665f7ae378bb27fcd2617c402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae75a791665f7ae378bb27fcd2617c402">&#9670;&#160;</a></span>coap_io_do_epoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void coap_io_do_epoll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct epoll_event *&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nevents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process all the epoll events. </p>
<p>Note: If epoll support is compiled into libcoap, <a class="el" href="group__app__io.html#gae75a791665f7ae378bb27fcd2617c402" title="Process all the epoll events.">coap_io_do_epoll()</a> must be used instead of <a class="el" href="group__app__io.html#gaec2083a94bd1f43582f981f3370e45dd" title="Processes any outstanding read, write, accept or connect I/O as indicated in the coap_socket_t struct...">coap_io_do_io()</a>.</p>
<p>Internal function</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The current CoAP context. </td></tr>
    <tr><td class="paramname">events</td><td>The list of events returned from an epoll_wait() call. </td></tr>
    <tr><td class="paramname">nevents</td><td>The number of events. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="coap__net_8c_source.html#l02367">2367</a> of file <a class="el" href="coap__net_8c_source.html">coap_net.c</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_gae75a791665f7ae378bb27fcd2617c402_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gaec2083a94bd1f43582f981f3370e45dd" name="gaec2083a94bd1f43582f981f3370e45dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec2083a94bd1f43582f981f3370e45dd">&#9670;&#160;</a></span>coap_io_do_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void coap_io_do_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__clock.html#ga97ff1502e211b4ee6c3f15a598833438">coap_tick_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes any outstanding read, write, accept or connect I/O as indicated in the <a class="el" href="structcoap__socket__t.html">coap_socket_t</a> structures (COAP_SOCKET_CAN_xxx set) embedded in endpoints or sessions associated with <code>ctx</code>. </p>
<p>Note: If epoll support is compiled into libcoap, <a class="el" href="group__app__io.html#gae75a791665f7ae378bb27fcd2617c402" title="Process all the epoll events.">coap_io_do_epoll()</a> must be used instead of <a class="el" href="group__app__io.html#gaec2083a94bd1f43582f981f3370e45dd" title="Processes any outstanding read, write, accept or connect I/O as indicated in the coap_socket_t struct...">coap_io_do_io()</a>.</p>
<p>Internal function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The CoAP context </td></tr>
    <tr><td class="paramname">now</td><td>Current time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="coap__net_8c_source.html#l02306">2306</a> of file <a class="el" href="coap__net_8c_source.html">coap_net.c</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_gaec2083a94bd1f43582f981f3370e45dd_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga2023144481df2258b5947666a02ede6c" name="ga2023144481df2258b5947666a02ede6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2023144481df2258b5947666a02ede6c">&#9670;&#160;</a></span>coap_io_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_io_pending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check to see if there is any i/o pending for the <code>context</code>. </p>
<p>This includes Observe active (client) and partial large block transfers.</p>
<p><a class="el" href="group__app__io.html#ga0acc0068f8442ab2fb70bc30242fc5ef" title="The main I/O processing function.">coap_io_process()</a> is called internally to try to send outstanding data as well as process any packets just received.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The CoAP context.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> I/O still pending, <code>0</code> no I/O pending. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__io_8c_source.html#l01825">1825</a> of file <a class="el" href="coap__io_8c_source.html">coap_io.c</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_ga2023144481df2258b5947666a02ede6c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga95cf986f7935247aca8bd20c8d7adb12" name="ga95cf986f7935247aca8bd20c8d7adb12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95cf986f7935247aca8bd20c8d7adb12">&#9670;&#160;</a></span>coap_io_prepare_epoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> unsigned int coap_io_prepare_epoll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__clock.html#ga97ff1502e211b4ee6c3f15a598833438">coap_tick_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Any now timed out delayed packet is transmitted, along with any packets associated with requested observable response. </p>
<p>In addition, it returns when the next expected I/O is expected to take place (e.g. a packet retransmit).</p>
<p>Note: If epoll support is compiled into libcoap, <a class="el" href="group__app__io.html#ga95cf986f7935247aca8bd20c8d7adb12" title="Any now timed out delayed packet is transmitted, along with any packets associated with requested obs...">coap_io_prepare_epoll()</a> must be used instead of <a class="el" href="group__app__io.html#ga6213c0f2f9c7365c439589374ec3c91b" title="Iterates through all the coap_socket_t structures embedded in endpoints or sessions associated with t...">coap_io_prepare_io()</a>.</p>
<p>Internal function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The CoAP context </td></tr>
    <tr><td class="paramname">now</td><td>Current time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>timeout Maxmimum number of milliseconds that can be used by a epoll_wait() to wait for network events or 0 if wait should be forever. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__io_8c_source.html#l01242">1242</a> of file <a class="el" href="coap__io_8c_source.html">coap_io.c</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_ga95cf986f7935247aca8bd20c8d7adb12_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga6213c0f2f9c7365c439589374ec3c91b" name="ga6213c0f2f9c7365c439589374ec3c91b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6213c0f2f9c7365c439589374ec3c91b">&#9670;&#160;</a></span>coap_io_prepare_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> unsigned int coap_io_prepare_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__socket__t.html">coap_socket_t</a> *&#160;</td>
          <td class="paramname"><em>sockets</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_sockets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>num_sockets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__clock.html#ga97ff1502e211b4ee6c3f15a598833438">coap_tick_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterates through all the <a class="el" href="structcoap__socket__t.html">coap_socket_t</a> structures embedded in endpoints or sessions associated with the <code>ctx</code> to determine which are wanting any read, write, accept or connect I/O (COAP_SOCKET_WANT_xxx is set). </p>
<p>If set, the <a class="el" href="structcoap__socket__t.html">coap_socket_t</a> is added to the <code>sockets</code>.</p>
<p>Any now timed out delayed packet is transmitted, along with any packets associated with requested observable response.</p>
<p>In addition, it returns when the next expected I/O is expected to take place (e.g. a packet retransmit).</p>
<p>Prior to calling <a class="el" href="group__app__io.html#gaec2083a94bd1f43582f981f3370e45dd" title="Processes any outstanding read, write, accept or connect I/O as indicated in the coap_socket_t struct...">coap_io_do_io()</a>, the <code>sockets</code> must be tested to see if any of the COAP_SOCKET_WANT_xxx have the appropriate information and if so, COAP_SOCKET_CAN_xxx is set. This typically will be done after using a select() call.</p>
<p>Note: If epoll support is compiled into libcoap, <a class="el" href="group__app__io.html#ga95cf986f7935247aca8bd20c8d7adb12" title="Any now timed out delayed packet is transmitted, along with any packets associated with requested obs...">coap_io_prepare_epoll()</a> must be used instead of <a class="el" href="group__app__io.html#ga6213c0f2f9c7365c439589374ec3c91b" title="Iterates through all the coap_socket_t structures embedded in endpoints or sessions associated with t...">coap_io_prepare_io()</a>.</p>
<p>Internal function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The CoAP context </td></tr>
    <tr><td class="paramname">sockets</td><td>Array of socket descriptors, filled on output </td></tr>
    <tr><td class="paramname">max_sockets</td><td>Size of socket array. </td></tr>
    <tr><td class="paramname">num_sockets</td><td>Pointer to the number of valid entries in the socket arrays on output. </td></tr>
    <tr><td class="paramname">now</td><td>Current time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>timeout Maxmimum number of milliseconds that can be used by a select() to wait for network events or 0 if wait should be forever. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__io_8c_source.html#l01303">1303</a> of file <a class="el" href="coap__io_8c_source.html">coap_io.c</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_ga6213c0f2f9c7365c439589374ec3c91b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga0acc0068f8442ab2fb70bc30242fc5ef" name="ga0acc0068f8442ab2fb70bc30242fc5ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0acc0068f8442ab2fb70bc30242fc5ef">&#9670;&#160;</a></span>coap_io_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_io_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main I/O processing function. </p>
<p>All pending network I/O is completed, and then optionally waits for the next input packet.</p>
<p>This internally calls <a class="el" href="group__app__io.html#ga6213c0f2f9c7365c439589374ec3c91b" title="Iterates through all the coap_socket_t structures embedded in endpoints or sessions associated with t...">coap_io_prepare_io()</a>, then select() for the appropriate sockets, updates COAP_SOCKET_CAN_xxx where appropriate and then calls <a class="el" href="group__app__io.html#gaec2083a94bd1f43582f981f3370e45dd" title="Processes any outstanding read, write, accept or connect I/O as indicated in the coap_socket_t struct...">coap_io_do_io()</a> before returning with the time spent in the function.</p>
<p>Alternatively, if libcoap is compiled with epoll support, this internally calls <a class="el" href="group__app__io.html#ga95cf986f7935247aca8bd20c8d7adb12" title="Any now timed out delayed packet is transmitted, along with any packets associated with requested obs...">coap_io_prepare_epoll()</a>, then epoll_wait() for waiting for any file descriptors that have (internally) been set up with epoll_ctl() and finally <a class="el" href="group__app__io.html#gae75a791665f7ae378bb27fcd2617c402" title="Process all the epoll events.">coap_io_do_epoll()</a> before returning with the time spent in the function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The CoAP context </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>Minimum number of milliseconds to wait for new packets before returning after doing any processing. If COAP_IO_WAIT, the call will block until the next internal action (e.g. packet retransmit) if any, or block until the next packet is received whichever is the sooner and do the necessary processing. If COAP_IO_NO_WAIT, the function will return immediately after processing without waiting for any new input packets to arrive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of milliseconds spent in function or <code>-1</code> if there was an error </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__io_8c_source.html#l01581">1581</a> of file <a class="el" href="coap__io_8c_source.html">coap_io.c</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_ga0acc0068f8442ab2fb70bc30242fc5ef_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gaa68c0208f033c5e0c4201a2d2d5e515f" name="gaa68c0208f033c5e0c4201a2d2d5e515f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa68c0208f033c5e0c4201a2d2d5e515f">&#9670;&#160;</a></span>coap_io_process_with_fds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_io_process_with_fds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nfds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>readfds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>writefds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>exceptfds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main message processing loop with additional fds for internal select. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The CoAP context </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>Minimum number of milliseconds to wait for new packets before returning after doing any processing. If COAP_IO_WAIT, the call will block until the next internal action (e.g. packet retransmit) if any, or block until the next packet is received whichever is the sooner and do the necessary processing. If COAP_IO_NO_WAIT, the function will return immediately after processing without waiting for any new input packets to arrive. </td></tr>
    <tr><td class="paramname">nfds</td><td>The maximum FD set in readfds, writefds or exceptfds plus one, </td></tr>
    <tr><td class="paramname">readfds</td><td>Read FDs to additionally check for in internal select() or NULL if not required. </td></tr>
    <tr><td class="paramname">writefds</td><td>Write FDs to additionally check for in internal select() or NULL if not required. </td></tr>
    <tr><td class="paramname">exceptfds</td><td>Except FDs to additionally check for in internal select() or NULL if not required.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of milliseconds spent in coap_io_process_with_fds, or <code>-1</code> if there was an error. If defined, readfds, writefds, exceptfds are updated as returned by the internal select() call. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__io_8c_source.html#l01596">1596</a> of file <a class="el" href="coap__io_8c_source.html">coap_io.c</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__app__io_gaa68c0208f033c5e0c4201a2d2d5e515f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Sep 7 2024 00:02:05 for libcoap by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
