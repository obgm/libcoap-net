<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoap: Resource Observation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcoap<span id="projectnumber">&#160;4.3.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__observe.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Resource Observation<div class="ingroups"><a class="el" href="group__application__api.html">Application API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>API for interfacing with the observe handling (RFC7641)  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Resource Observation:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__observe.svg" width="344" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga8f172a982abdbb1c45fc5bdb90a23da4" id="r_ga8f172a982abdbb1c45fc5bdb90a23da4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga8f172a982abdbb1c45fc5bdb90a23da4">COAP_OBSERVE_ESTABLISH</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga8f172a982abdbb1c45fc5bdb90a23da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The value COAP_OBSERVE_ESTABLISH in a GET/FETCH request option COAP_OPTION_OBSERVE indicates a new observe relationship for (sender address, token) is requested.  <br /></td></tr>
<tr class="separator:ga8f172a982abdbb1c45fc5bdb90a23da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51750fd894c457a4fe45f06c96641b2f" id="r_ga51750fd894c457a4fe45f06c96641b2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga51750fd894c457a4fe45f06c96641b2f">COAP_OBSERVE_CANCEL</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga51750fd894c457a4fe45f06c96641b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The value COAP_OBSERVE_CANCEL in a GET/FETCH request option COAP_OPTION_OBSERVE indicates that the observe relationship for (sender address, token) must be cancelled.  <br /></td></tr>
<tr class="separator:ga51750fd894c457a4fe45f06c96641b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga79d0e06c75b005efd485b00b9d3601a4" id="r_ga79d0e06c75b005efd485b00b9d3601a4"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga79d0e06c75b005efd485b00b9d3601a4">coap_observe_added_t</a>) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__subscription__t.html">coap_subscription_t</a> *observe_key, <a class="el" href="group__pdu.html#ga6a42f44f0b183140463e44fe9c8dfec6">coap_proto_t</a> e_proto, <a class="el" href="structcoap__address__t.html">coap_address_t</a> *e_listen_addr, <a class="el" href="structcoap__addr__tuple__t.html">coap_addr_tuple_t</a> *s_addr_info, <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *raw_packet, <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *oscore_info, void *user_data)</td></tr>
<tr class="memdesc:ga79d0e06c75b005efd485b00b9d3601a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback handler definition called when a new observe has been set up, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.  <br /></td></tr>
<tr class="separator:ga79d0e06c75b005efd485b00b9d3601a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad80f3e6871ee119fbc2d9432172eb4d1" id="r_gad80f3e6871ee119fbc2d9432172eb4d1"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#gad80f3e6871ee119fbc2d9432172eb4d1">coap_observe_deleted_t</a>) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__subscription__t.html">coap_subscription_t</a> *observe_key, void *user_data)</td></tr>
<tr class="memdesc:gad80f3e6871ee119fbc2d9432172eb4d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback handler definition called when an observe is being removed, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.  <br /></td></tr>
<tr class="separator:gad80f3e6871ee119fbc2d9432172eb4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8e885ad0a48aee6b220dddb3303be43" id="r_gac8e885ad0a48aee6b220dddb3303be43"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#gac8e885ad0a48aee6b220dddb3303be43">coap_track_observe_value_t</a>) (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, <a class="el" href="structcoap__str__const__t.html">coap_str_const_t</a> *resource_name, uint32_t observe_num, void *user_data)</td></tr>
<tr class="memdesc:gac8e885ad0a48aee6b220dddb3303be43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback handler definition called when an observe unsolicited response is being sent, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.  <br /></td></tr>
<tr class="separator:gac8e885ad0a48aee6b220dddb3303be43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fbc39477ef9ca33b44ee1dfc13a00c0" id="r_ga1fbc39477ef9ca33b44ee1dfc13a00c0"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga1fbc39477ef9ca33b44ee1dfc13a00c0">coap_dyn_resource_added_t</a>) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__str__const__t.html">coap_str_const_t</a> *resource_name, <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *raw_packet, void *user_data)</td></tr>
<tr class="memdesc:ga1fbc39477ef9ca33b44ee1dfc13a00c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback handler definition called when a dynamic resource is getting created, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.  <br /></td></tr>
<tr class="separator:ga1fbc39477ef9ca33b44ee1dfc13a00c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga674f970b6996cfc2f66e00f3cf5f2265" id="r_ga674f970b6996cfc2f66e00f3cf5f2265"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga674f970b6996cfc2f66e00f3cf5f2265">coap_resource_deleted_t</a>) (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, <a class="el" href="structcoap__str__const__t.html">coap_str_const_t</a> *resource_name, void *user_data)</td></tr>
<tr class="memdesc:ga674f970b6996cfc2f66e00f3cf5f2265"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback handler definition called when resource is removed, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.  <br /></td></tr>
<tr class="separator:ga674f970b6996cfc2f66e00f3cf5f2265"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6717daf379770ae060e6c0f800ac7482" id="r_ga6717daf379770ae060e6c0f800ac7482"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga6717daf379770ae060e6c0f800ac7482">coap_resource_set_get_observable</a> (<a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *resource, int mode)</td></tr>
<tr class="memdesc:ga6717daf379770ae060e6c0f800ac7482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set whether a <code>resource</code> is observable.  <br /></td></tr>
<tr class="separator:ga6717daf379770ae060e6c0f800ac7482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb3eb6aaeb4e068182a4696af361b66e" id="r_gadb3eb6aaeb4e068182a4696af361b66e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#gadb3eb6aaeb4e068182a4696af361b66e">coap_resource_notify_observers</a> (<a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *resource, const <a class="el" href="structcoap__string__t.html">coap_string_t</a> *query)</td></tr>
<tr class="memdesc:gadb3eb6aaeb4e068182a4696af361b66e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiate the sending of an Observe packet for all observers of <code>resource</code>, optionally matching <code>query</code> if not NULL.  <br /></td></tr>
<tr class="separator:gadb3eb6aaeb4e068182a4696af361b66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7488a335467d19f06932c5fa1590e23c" id="r_ga7488a335467d19f06932c5fa1590e23c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga7488a335467d19f06932c5fa1590e23c">coap_check_notify</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context)</td></tr>
<tr class="memdesc:ga7488a335467d19f06932c5fa1590e23c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks all known resources to see if they are dirty and then notifies subscribed observers.  <br /></td></tr>
<tr class="separator:ga7488a335467d19f06932c5fa1590e23c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3b71f0b81dce4244f3a420e5b515292" id="r_gab3b71f0b81dce4244f3a420e5b515292"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292">coap_persist_track_funcs</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, <a class="el" href="group__observe.html#ga79d0e06c75b005efd485b00b9d3601a4">coap_observe_added_t</a> observe_added, <a class="el" href="group__observe.html#gad80f3e6871ee119fbc2d9432172eb4d1">coap_observe_deleted_t</a> observe_deleted, <a class="el" href="group__observe.html#gac8e885ad0a48aee6b220dddb3303be43">coap_track_observe_value_t</a> track_observe_value, <a class="el" href="group__observe.html#ga1fbc39477ef9ca33b44ee1dfc13a00c0">coap_dyn_resource_added_t</a> dyn_resource_added, <a class="el" href="group__observe.html#ga674f970b6996cfc2f66e00f3cf5f2265">coap_resource_deleted_t</a> resource_deleted, uint32_t save_freq, void *user_data)</td></tr>
<tr class="memdesc:gab3b71f0b81dce4244f3a420e5b515292"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up callbacks to handle persist tracking so on a coap-server inadvertent restart, existing observe subscriptions can continue.  <br /></td></tr>
<tr class="separator:gab3b71f0b81dce4244f3a420e5b515292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1368b03664ae7f808c5f15a1748be12b" id="r_ga1368b03664ae7f808c5f15a1748be12b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> <a class="el" href="structcoap__subscription__t.html">coap_subscription_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga1368b03664ae7f808c5f15a1748be12b">coap_persist_observe_add</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, <a class="el" href="group__pdu.html#ga6a42f44f0b183140463e44fe9c8dfec6">coap_proto_t</a> e_proto, const <a class="el" href="structcoap__address__t.html">coap_address_t</a> *e_listen_addr, const <a class="el" href="structcoap__addr__tuple__t.html">coap_addr_tuple_t</a> *s_addr_info, const <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *raw_packet, const <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *oscore_info)</td></tr>
<tr class="memdesc:ga1368b03664ae7f808c5f15a1748be12b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up an active subscription for an observe that was previously active over a coap-server inadvertant restart.  <br /></td></tr>
<tr class="separator:ga1368b03664ae7f808c5f15a1748be12b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf630accdbd274b90d312b23d6c1322bf" id="r_gaf630accdbd274b90d312b23d6c1322bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#gaf630accdbd274b90d312b23d6c1322bf">coap_persist_startup</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, const char *dyn_resource_save_file, const char *observe_save_file, const char *obs_cnt_save_file, uint32_t save_freq)</td></tr>
<tr class="memdesc:gaf630accdbd274b90d312b23d6c1322bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up persist tracking using the libcoap module.  <br /></td></tr>
<tr class="separator:gaf630accdbd274b90d312b23d6c1322bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa43c70f3bbb77606752d2b49d33580ff" id="r_gaa43c70f3bbb77606752d2b49d33580ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#gaa43c70f3bbb77606752d2b49d33580ff">coap_persist_stop</a> (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context)</td></tr>
<tr class="memdesc:gaa43c70f3bbb77606752d2b49d33580ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop tracking persist information, leaving the current persist information in the files defined in <a class="el" href="group__observe.html#gaf630accdbd274b90d312b23d6c1322bf" title="Start up persist tracking using the libcoap module.">coap_persist_startup()</a>.  <br /></td></tr>
<tr class="separator:gaa43c70f3bbb77606752d2b49d33580ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga658bf9aaf37a03c35a2654baebe1a358" id="r_ga658bf9aaf37a03c35a2654baebe1a358"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga658bf9aaf37a03c35a2654baebe1a358">coap_persist_set_observe_num</a> (<a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *resource, uint32_t observe_num)</td></tr>
<tr class="memdesc:ga658bf9aaf37a03c35a2654baebe1a358"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current observe number value.  <br /></td></tr>
<tr class="separator:ga658bf9aaf37a03c35a2654baebe1a358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95e4385435d2fc70a10daa2a3c2dfd1c" id="r_ga95e4385435d2fc70a10daa2a3c2dfd1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__observe.html#ga95e4385435d2fc70a10daa2a3c2dfd1c">coap_cancel_observe</a> (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__binary__t.html">coap_binary_t</a> *token, <a class="el" href="group__pdu.html#ga896dbeafb92ddb9b0694ba277bb22801">coap_pdu_type_t</a> message_type)</td></tr>
<tr class="memdesc:ga95e4385435d2fc70a10daa2a3c2dfd1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel an observe that is being tracked by the client large receive logic.  <br /></td></tr>
<tr class="separator:ga95e4385435d2fc70a10daa2a3c2dfd1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API for interfacing with the observe handling (RFC7641) </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga51750fd894c457a4fe45f06c96641b2f" name="ga51750fd894c457a4fe45f06c96641b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51750fd894c457a4fe45f06c96641b2f">&#9670;&#160;</a></span>COAP_OBSERVE_CANCEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_OBSERVE_CANCEL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The value COAP_OBSERVE_CANCEL in a GET/FETCH request option COAP_OPTION_OBSERVE indicates that the observe relationship for (sender address, token) must be cancelled. </p>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00040">40</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<a id="ga8f172a982abdbb1c45fc5bdb90a23da4" name="ga8f172a982abdbb1c45fc5bdb90a23da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f172a982abdbb1c45fc5bdb90a23da4">&#9670;&#160;</a></span>COAP_OBSERVE_ESTABLISH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAP_OBSERVE_ESTABLISH&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The value COAP_OBSERVE_ESTABLISH in a GET/FETCH request option COAP_OPTION_OBSERVE indicates a new observe relationship for (sender address, token) is requested. </p>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00033">33</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga1fbc39477ef9ca33b44ee1dfc13a00c0" name="ga1fbc39477ef9ca33b44ee1dfc13a00c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1fbc39477ef9ca33b44ee1dfc13a00c0">&#9670;&#160;</a></span>coap_dyn_resource_added_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* coap_dyn_resource_added_t) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__str__const__t.html">coap_str_const_t</a> *resource_name, <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *raw_packet, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback handler definition called when a dynamic resource is getting created, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The current CoAP session. </td></tr>
    <tr><td class="paramname">resource_name</td><td>The uri path name of the resource. </td></tr>
    <tr><td class="paramname">raw_packet</td><td>L7 packet as seen on the wire (could be concatenated if Block1 PUT/POST/FETCH used to create resource). </td></tr>
    <tr><td class="paramname">user_data</td><td>Application provided information from <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if success else <code>0</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00149">149</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<a id="ga79d0e06c75b005efd485b00b9d3601a4" name="ga79d0e06c75b005efd485b00b9d3601a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79d0e06c75b005efd485b00b9d3601a4">&#9670;&#160;</a></span>coap_observe_added_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* coap_observe_added_t) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__subscription__t.html">coap_subscription_t</a> *observe_key, <a class="el" href="group__pdu.html#ga6a42f44f0b183140463e44fe9c8dfec6">coap_proto_t</a> e_proto, <a class="el" href="structcoap__address__t.html">coap_address_t</a> *e_listen_addr, <a class="el" href="structcoap__addr__tuple__t.html">coap_addr_tuple_t</a> *s_addr_info, <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *raw_packet, <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *oscore_info, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback handler definition called when a new observe has been set up, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The current session. </td></tr>
    <tr><td class="paramname">observe_key</td><td>The pointer to the subscription. </td></tr>
    <tr><td class="paramname">e_proto</td><td>The CoAP protocol in use for the session / endpoint. </td></tr>
    <tr><td class="paramname">e_listen_addr</td><td>The IP/port that the endpoint is listening on. </td></tr>
    <tr><td class="paramname">s_addr_info</td><td>Local / Remote IP addresses. ports etc. of session. </td></tr>
    <tr><td class="paramname">raw_packet</td><td>L7 packet as seen on the wire (could be concatenated if Block1 FETCH is being used). </td></tr>
    <tr><td class="paramname">oscore_info</td><td>Has OSCORE information if OSCORE is protecting the session or NULL if OSCORE is not in use. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application provided information from <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if success else <code>0</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00092">92</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<a id="gad80f3e6871ee119fbc2d9432172eb4d1" name="gad80f3e6871ee119fbc2d9432172eb4d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad80f3e6871ee119fbc2d9432172eb4d1">&#9670;&#160;</a></span>coap_observe_deleted_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* coap_observe_deleted_t) (<a class="el" href="structcoap__session__t.html">coap_session_t</a> *session, <a class="el" href="structcoap__subscription__t.html">coap_subscription_t</a> *observe_key, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback handler definition called when an observe is being removed, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The current session. </td></tr>
    <tr><td class="paramname">observe_key</td><td>The pointer to the subscription. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application provided information from <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if success else <code>0</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00112">112</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<a id="ga674f970b6996cfc2f66e00f3cf5f2265" name="ga674f970b6996cfc2f66e00f3cf5f2265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga674f970b6996cfc2f66e00f3cf5f2265">&#9670;&#160;</a></span>coap_resource_deleted_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* coap_resource_deleted_t) (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, <a class="el" href="structcoap__str__const__t.html">coap_str_const_t</a> *resource_name, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback handler definition called when resource is removed, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>. </p>
<p>This will remove any dynamic resources that are being tracked as well as any observe value tracking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The current CoAP context. </td></tr>
    <tr><td class="paramname">resource_name</td><td>The uri path name of the resource. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application provided information from <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if success else <code>0</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00168">168</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<a id="gac8e885ad0a48aee6b220dddb3303be43" name="gac8e885ad0a48aee6b220dddb3303be43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac8e885ad0a48aee6b220dddb3303be43">&#9670;&#160;</a></span>coap_track_observe_value_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* coap_track_observe_value_t) (<a class="el" href="structcoap__context__t.html">coap_context_t</a> *context, <a class="el" href="structcoap__str__const__t.html">coap_str_const_t</a> *resource_name, uint32_t observe_num, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback handler definition called when an observe unsolicited response is being sent, as defined in <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>. </p>
<p>Note: This will only get called every save_freq as defined by <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The current CoAP context. </td></tr>
    <tr><td class="paramname">resource_name</td><td>The uri path name of the resource. </td></tr>
    <tr><td class="paramname">observe_num</td><td>The current observe value just sent. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application provided information from <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if success else <code>0</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="coap__subscribe_8h_source.html#l00131">131</a> of file <a class="el" href="coap__subscribe_8h_source.html">coap_subscribe.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga95e4385435d2fc70a10daa2a3c2dfd1c" name="ga95e4385435d2fc70a10daa2a3c2dfd1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95e4385435d2fc70a10daa2a3c2dfd1c">&#9670;&#160;</a></span>coap_cancel_observe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_cancel_observe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__session__t.html">coap_session_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcoap__binary__t.html">coap_binary_t</a> *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__pdu.html#ga896dbeafb92ddb9b0694ba277bb22801">coap_pdu_type_t</a>&#160;</td>
          <td class="paramname"><em>message_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel an observe that is being tracked by the client large receive logic. </p>
<p>(<a class="el" href="group__block.html#ga01fc0d92035beec6b18d4467d8c58970" title="Set the context level CoAP block handling bits for handling RFC7959.">coap_context_set_block_mode()</a> has to be called) This will trigger the sending of an observe cancel pdu to the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The session that is being used for the observe. </td></tr>
    <tr><td class="paramname">token</td><td>The original token used to initiate the observation. </td></tr>
    <tr><td class="paramname">message_type</td><td>The COAP_MESSAGE_ type (NON or CON) to send the observe cancel pdu as.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if observe cancel transmission initiation is successful, else <code>0</code>. </dd></dl>

</div>
</div>
<a id="ga7488a335467d19f06932c5fa1590e23c" name="ga7488a335467d19f06932c5fa1590e23c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7488a335467d19f06932c5fa1590e23c">&#9670;&#160;</a></span>coap_check_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void coap_check_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks all known resources to see if they are dirty and then notifies subscribed observers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The context to check for dirty resources. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1368b03664ae7f808c5f15a1748be12b" name="ga1368b03664ae7f808c5f15a1748be12b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1368b03664ae7f808c5f15a1748be12b">&#9670;&#160;</a></span>coap_persist_observe_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> <a class="el" href="structcoap__subscription__t.html">coap_subscription_t</a> * coap_persist_observe_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__pdu.html#ga6a42f44f0b183140463e44fe9c8dfec6">coap_proto_t</a>&#160;</td>
          <td class="paramname"><em>e_proto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__address__t.html">coap_address_t</a> *&#160;</td>
          <td class="paramname"><em>e_listen_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__addr__tuple__t.html">coap_addr_tuple_t</a> *&#160;</td>
          <td class="paramname"><em>s_addr_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *&#160;</td>
          <td class="paramname"><em>raw_packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__bin__const__t.html">coap_bin_const_t</a> *&#160;</td>
          <td class="paramname"><em>oscore_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up an active subscription for an observe that was previously active over a coap-server inadvertant restart. </p>
<p>Only UDP sessions currently supported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The context that the session is to be associated with. </td></tr>
    <tr><td class="paramname">e_proto</td><td>The CoAP protocol in use for the session / endpoint. </td></tr>
    <tr><td class="paramname">e_listen_addr</td><td>The IP/port that the endpoint is listening on. </td></tr>
    <tr><td class="paramname">s_addr_info</td><td>Local / Remote IP addresses. ports etc. of previous session. </td></tr>
    <tr><td class="paramname">raw_packet</td><td>L7 packet as seen on the wire (could be concatenated if Block1 FETCH is being used). </td></tr>
    <tr><td class="paramname">oscore_info</td><td>Has OSCORE information if OSCORE is protecting the session or NULL if OSCORE is not in use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ptr to subscription if success else <code>NULL</code>. </dd></dl>

</div>
</div>
<a id="ga658bf9aaf37a03c35a2654baebe1a358" name="ga658bf9aaf37a03c35a2654baebe1a358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga658bf9aaf37a03c35a2654baebe1a358">&#9670;&#160;</a></span>coap_persist_set_observe_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void coap_persist_set_observe_num </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *&#160;</td>
          <td class="paramname"><em>resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>observe_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the current observe number value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resource</td><td>The resource to update. </td></tr>
    <tr><td class="paramname">observe_num</td><td>The value to set the observe number to. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf630accdbd274b90d312b23d6c1322bf" name="gaf630accdbd274b90d312b23d6c1322bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf630accdbd274b90d312b23d6c1322bf">&#9670;&#160;</a></span>coap_persist_startup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_persist_startup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dyn_resource_save_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>observe_save_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>obs_cnt_save_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>save_freq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up persist tracking using the libcoap module. </p>
<p>If the files already exist with saved data, then this information is used in building back up the persist information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The current CoAP context. </td></tr>
    <tr><td class="paramname">dyn_resource_save_file</td><td>File where dynamically created resource information is stored or NULL if not required. </td></tr>
    <tr><td class="paramname">observe_save_file</td><td>File where observe information is stored or NULL if not required. </td></tr>
    <tr><td class="paramname">obs_cnt_save_file</td><td>File where resource observe counter information is stored or NULL if not required. </td></tr>
    <tr><td class="paramname">save_freq</td><td>Frequency of change of observe value for calling the save observe counter logic.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if success else <code>0</code>. </dd></dl>

</div>
</div>
<a id="gaa43c70f3bbb77606752d2b49d33580ff" name="gaa43c70f3bbb77606752d2b49d33580ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa43c70f3bbb77606752d2b49d33580ff">&#9670;&#160;</a></span>coap_persist_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> void coap_persist_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop tracking persist information, leaving the current persist information in the files defined in <a class="el" href="group__observe.html#gaf630accdbd274b90d312b23d6c1322bf" title="Start up persist tracking using the libcoap module.">coap_persist_startup()</a>. </p>
<p>It is then safe to call <a class="el" href="group__context.html#ga76bf8288b83c57bcd32d8c292d4e999b" title="CoAP stack context must be released with coap_free_context().">coap_free_context()</a> to close the application down cleanly.</p>
<p>Alternatively, if <a class="el" href="group__observe.html#gab3b71f0b81dce4244f3a420e5b515292" title="Set up callbacks to handle persist tracking so on a coap-server inadvertent restart,...">coap_persist_track_funcs()</a> was called, then this will disable all the callbacks, as well as making sure that no 4.04 is sent out for any active observe subscriptions when the resource is deleted after subsequently calling <a class="el" href="group__context.html#ga76bf8288b83c57bcd32d8c292d4e999b" title="CoAP stack context must be released with coap_free_context().">coap_free_context()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The context that tracking information is to be stopped on. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab3b71f0b81dce4244f3a420e5b515292" name="gab3b71f0b81dce4244f3a420e5b515292"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3b71f0b81dce4244f3a420e5b515292">&#9670;&#160;</a></span>coap_persist_track_funcs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void coap_persist_track_funcs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__context__t.html">coap_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__observe.html#ga79d0e06c75b005efd485b00b9d3601a4">coap_observe_added_t</a>&#160;</td>
          <td class="paramname"><em>observe_added</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__observe.html#gad80f3e6871ee119fbc2d9432172eb4d1">coap_observe_deleted_t</a>&#160;</td>
          <td class="paramname"><em>observe_deleted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__observe.html#gac8e885ad0a48aee6b220dddb3303be43">coap_track_observe_value_t</a>&#160;</td>
          <td class="paramname"><em>track_observe_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__observe.html#ga1fbc39477ef9ca33b44ee1dfc13a00c0">coap_dyn_resource_added_t</a>&#160;</td>
          <td class="paramname"><em>dyn_resource_added</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__observe.html#ga674f970b6996cfc2f66e00f3cf5f2265">coap_resource_deleted_t</a>&#160;</td>
          <td class="paramname"><em>resource_deleted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>save_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up callbacks to handle persist tracking so on a coap-server inadvertent restart, existing observe subscriptions can continue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The current CoAP context. </td></tr>
    <tr><td class="paramname">observe_added</td><td>Called when a new observe subscription is set up. </td></tr>
    <tr><td class="paramname">observe_deleted</td><td>Called when a observe subscription is de-registered. </td></tr>
    <tr><td class="paramname">track_observe_value</td><td>Called every <code>save_freq</code> so current observe value can be tracked. </td></tr>
    <tr><td class="paramname">dyn_resource_added</td><td>Called whan a dynamic resource is created from the 'unknown' resource for tracking. </td></tr>
    <tr><td class="paramname">resource_deleted</td><td>Called when a resource is removed. </td></tr>
    <tr><td class="paramname">save_freq</td><td>Frequency of change of observe value for calling <code>save_observe_value</code> </td></tr>
    <tr><td class="paramname">user_data</td><td>App defined data (can be NULL) passed into various callbacks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gadb3eb6aaeb4e068182a4696af361b66e" name="gadb3eb6aaeb4e068182a4696af361b66e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb3eb6aaeb4e068182a4696af361b66e">&#9670;&#160;</a></span>coap_resource_notify_observers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coap__libcoap__build_8h.html#a4be0103bb0dabd3adbe19023fda59212">COAP_API</a> int coap_resource_notify_observers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *&#160;</td>
          <td class="paramname"><em>resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcoap__string__t.html">coap_string_t</a> *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiate the sending of an Observe packet for all observers of <code>resource</code>, optionally matching <code>query</code> if not NULL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resource</td><td>The CoAP resource to use. </td></tr>
    <tr><td class="paramname">query</td><td>The Query to match against or NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>1</code> if the Observe has been triggered, <code>0</code> otherwise. </dd></dl>

</div>
</div>
<a id="ga6717daf379770ae060e6c0f800ac7482" name="ga6717daf379770ae060e6c0f800ac7482"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6717daf379770ae060e6c0f800ac7482">&#9670;&#160;</a></span>coap_resource_set_get_observable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void coap_resource_set_get_observable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__resource__t.html">coap_resource_t</a> *&#160;</td>
          <td class="paramname"><em>resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set whether a <code>resource</code> is observable. </p>
<p>If the resource is observable and the client has set the COAP_OPTION_OBSERVE in a request packet, then whenever the state of the resource changes (a call to coap_resource_trigger_observe()), an Observer response will get sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resource</td><td>The CoAP resource to use. </td></tr>
    <tr><td class="paramname">mode</td><td><code>1</code> if Observable is to be set, <code>0</code> otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Sep 7 2024 00:02:05 for libcoap by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
