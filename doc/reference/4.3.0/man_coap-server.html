<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoap: coap-server(5)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libcoap
   &#160;<span id="projectnumber">4.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('man_coap-server.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">coap-server(5) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>coap-server</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="idm1"></a><div class="titlepage"></div><div class="refnamediv"><h2>NAME</h2><p>coap-server, coap-server-gnutls, coap-server-mbedtls, coap-server-openssl, coap-server-notls â€” CoAP Server based on libcoap</p></div><div class="refsynopsisdiv"><a id="_synopsis"></a><h2>SYNOPSIS</h2><p><span class="strong"><strong>coap-server</strong></span> [<span class="strong"><strong>-d</strong></span> max] [<span class="strong"><strong>-e</strong></span>] [<span class="strong"><strong>-g</strong></span> group] [<span class="strong"><strong>-G</strong></span> group_if] [<span class="strong"><strong>-l</strong></span> loss]
              [<span class="strong"><strong>-p</strong></span> port] [<span class="strong"><strong>-v</strong></span> num] [<span class="strong"><strong>-A</strong></span> address] [<span class="strong"><strong>-L</strong></span> value] [<span class="strong"><strong>-N</strong></span>]
              [<span class="strong"><strong>-P</strong></span> scheme://addr[:port],name1[,name2..]]
              [[<span class="strong"><strong>-h</strong></span> hint] [<span class="strong"><strong>-i</strong></span> match_identity_file] [<span class="strong"><strong>-k</strong></span> key]
              [<span class="strong"><strong>-s</strong></span> match_psk_sni_file] [<span class="strong"><strong>-u</strong></span> user]]
              [[<span class="strong"><strong>-c</strong></span> certfile] [<span class="strong"><strong>-j</strong></span> keyfile] [<span class="strong"><strong>-n</strong></span>] [<span class="strong"><strong>-C</strong></span> cafile]
              [<span class="strong"><strong>-J</strong></span> pkcs11_pin] [<span class="strong"><strong>-M</strong></span> rpk_file] [<span class="strong"><strong>-R</strong></span> trust_casfile]
              [<span class="strong"><strong>-S</strong></span> match_pki_sni_file]]</p><p>For <span class="strong"><strong>coap-server</strong></span> versions that use libcoap compiled for different
(D)TLS libraries, <span class="strong"><strong>coap-server-notls</strong></span>, <span class="strong"><strong>coap-server-gnutls</strong></span>,
<span class="strong"><strong>coap-server-openssl</strong></span>, <span class="strong"><strong>coap-server-mbedtls</strong></span> or <span class="strong"><strong>coap-server-tinydtls</strong></span> may be
available.  Otherwise, <span class="strong"><strong>coap-server</strong></span> uses the default libcoap (D)TLS support.</p></div><div class="refsect1"><a id="_description"></a><h2>DESCRIPTION</h2><p><span class="strong"><strong>coap-server</strong></span> is an example server for the 'Constrained Application Protocol`
(RFC 7252).</p></div><div class="refsect1"><a id="_options_general"></a><h2>OPTIONS - General</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>-d</strong></span> max
</span></dt><dd>
   Enable support for creation of dynamic resources when doing a PUT up to a
   limit of <span class="emphasis"><em>max</em></span>.  If <span class="emphasis"><em>max</em></span> is reached, a 4.06 code is returned until one of
   the dynamic resources has been deleted.
</dd><dt><span class="term">
<span class="strong"><strong>-e</strong></span> 
</span></dt><dd>
   Echo back the data sent with a PUT.
</dd><dt><span class="term">
<span class="strong"><strong>-g</strong></span> group
</span></dt><dd>
   Join specified multicast <span class="emphasis"><em>group</em></span> on start up.
   <span class="strong"><strong>Note:</strong></span> DTLS over multicast is not currently supported.
</dd><dt><span class="term">
<span class="strong"><strong>-G</strong></span> group_if
</span></dt><dd>
   Use this interface for listening for the multicast group. This can be
   different from the implied interface if the <span class="strong"><strong>-A</strong></span> option is used.
</dd><dt><span class="term">
<span class="strong"><strong>-l</strong></span> list
</span></dt><dd>
   Fail to send some datagrams specified by a comma separated list of
   numbers or number ranges (debugging only).
</dd><dt><span class="term">
<span class="strong"><strong>-l</strong></span> loss%
</span></dt><dd>
   Randomly failed to send datagrams with the specified probability - 100%
   all datagrams, 0% no datagrams (debugging only).
</dd><dt><span class="term">
<span class="strong"><strong>-p</strong></span> port
</span></dt><dd>
   The <span class="emphasis"><em>port</em></span> on the given address will be listening for incoming connections.
   If (D)TLS is supported, then <span class="emphasis"><em>port</em></span> + 1 will also be listened on for
   (D)TLS connections.
   The default port is 5683 if not given any other value.
</dd><dt><span class="term">
<span class="strong"><strong>-v</strong></span> num
</span></dt><dd>
   The verbosity level to use (default 3, maximum is 9). Above 7, there is
   increased verbosity in GnuTLS and OpenSSL logging.
</dd><dt><span class="term">
<span class="strong"><strong>-A</strong></span> address
</span></dt><dd>
   The local address of the interface which the server has to listen on.
</dd><dt><span class="term">
<span class="strong"><strong>-L</strong></span> value
</span></dt><dd><p class="simpara">
   Sum of one or more COAP_BLOCK_* flag values for different block handling
   methods. Default is 1 (COAP_BLOCK_USE_LIBCOAP).
</p><pre class="literallayout">COAP_BLOCK_USE_LIBCOAP  1
COAP_BLOCK_SINGLE_BODY  2</pre></dd><dt><span class="term">
<span class="strong"><strong>-N</strong></span> 
</span></dt><dd>
   Send NON-confirmable message for "observe" responses. If option <span class="strong"><strong>-N</strong></span> is
   not specified, a confirmable response will be sent.  Even if set, every
   fifth response will still be sent as a confirmable response
   (RFC 7641 requirement).
</dd><dt><span class="term">
<span class="strong"><strong>-P</strong></span> scheme://address[:port],name1[,name2[,name3..]] 
</span></dt><dd>
   Scheme, address, optional port of how to connect to the next proxy server
   and one or more names (comma separated) that this proxy server is known by.
   If the hostname of the incoming proxy request matches one of these names,
   then this server is considered to be the final endpoint. If
   scheme://address[:port] is not defined before the leading , (comma) of the
   first name, then the ongoing connection will be a direct connection.
   Scheme is one of coap, coaps, coap+tcp and coaps+tcp.
</dd></dl></div></div><div class="refsect1"><a id="_options_psk"></a><h2>OPTIONS - PSK</h2><p>(If supported by underlying (D)TLS library)</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>-h</strong></span> hint
</span></dt><dd>
   Identity Hint to send. Default is <span class="strong"><strong>CoAP</strong></span>. Zero length is no hint.
</dd><dt><span class="term">
<span class="strong"><strong>-i</strong></span> match_identiity_file
</span></dt><dd>
   This is a file that contains one or more lines of Identity Hints and (user)
   Identities to match for a different new Pre-Shared Key (PSK) (comma
   separated) to be used. E.g., per line
   hint_to_match,identity_to_match,use_key
   A line that starts with # is treated as a comment.
   Note: <span class="strong"><strong>-k</strong></span> still needs to be defined for the default case.
   Note: A match using the <span class="strong"><strong>-s</strong></span> option may mean that the current Identity Hint
   is different to that defined by <span class="strong"><strong>-h</strong></span>.
</dd><dt><span class="term">
<span class="strong"><strong>-k</strong></span> key
</span></dt><dd>
   Pre-shared key to use for inbound connections. This cannot be empty if
   defined.
   Note: if <span class="strong"><strong>-c cafile</strong></span> is defined, you need to define <span class="strong"><strong>-k key</strong></span> as well to
   have the server support both PSK and PKI.
</dd><dt><span class="term">
<span class="strong"><strong>-s</strong></span> match_psk_sni_file
</span></dt><dd>
   This is a file that contains one or more lines of received Subject Name
   Identifier (SNI) to match to use a different Identity Hint and associated
   Pre-Shared Key (PSK) (comma separated) instead of the <span class="strong"><strong>-h hint</strong></span> and
   <span class="strong"><strong>-k key</strong></span> options. E.g., per line
   sni_to_match,use_hint,with_key
   Note: <span class="strong"><strong>-k key</strong></span> still needs to be defined for the default case if there is
   not a match.
   Note: The associated Pre-Shared Key will get updated if there is also a <span class="strong"><strong>-i</strong></span>
   match. The update checking order is <span class="strong"><strong>-s</strong></span> followed by <span class="strong"><strong>-i</strong></span>.
</dd><dt><span class="term">
<span class="strong"><strong>-u</strong></span> user 
</span></dt><dd>
   User identity for pre-shared key mode (only used if option <span class="strong"><strong>-P</strong></span> is set).
</dd></dl></div></div><div class="refsect1"><a id="_options_pki"></a><h2>OPTIONS - PKI</h2><p>(If supported by underlying (D)TLS library)</p><p><span class="strong"><strong>Note:</strong></span> If any one of <span class="strong"><strong>certfile</strong></span>, <span class="strong"><strong>keyfile</strong></span> or <span class="strong"><strong>cafile</strong></span> is in PKCS11 URI
naming format (pkcs11: prefix), then any remaining non PKCS11 URI file
definitions have to be in DER, not PEM, format.  Otherwise all of
<span class="strong"><strong>certfile</strong></span>, <span class="strong"><strong>keyfile</strong></span> or <span class="strong"><strong>cafile</strong></span> are in PEM format.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>-c</strong></span> certfile
</span></dt><dd>
  PEM file or PKCS11 URI for the certificate. The private key can also be in
  the PEM file, or has the same PKCS11 URI. If not, the private key is defined
  by <span class="strong"><strong>-j keyfile</strong></span>.
  Note: if <span class="strong"><strong>-k key</strong></span> is defined, you need to define <span class="strong"><strong>-c certfile</strong></span> as well to
  have the server support both PSK and PKI.
</dd><dt><span class="term">
<span class="strong"><strong>-j</strong></span> keyfile
</span></dt><dd>
  PEM file or PKCS11 URI for the private key for the certificate in <span class="strong"><strong>-c
  certfile</strong></span> if the parameter is different from certfile in <span class="strong"><strong>-c certfile</strong></span>.
</dd><dt><span class="term">
<span class="strong"><strong>-n</strong></span> 
</span></dt><dd>
  Disable remote peer certificate checking. This gives clients the ability to
  use PKI, but without any defined certificates.
</dd><dt><span class="term">
<span class="strong"><strong>-C</strong></span> cafile
</span></dt><dd>
  PEM file or PKCS11 URI that contains a list of one or more CAs that are to
  be passed to the client for the client to determine what client certificate
  to use.  Normally, this list of CAs would be the root CA and and any
  intermediate CAs. Ideally the server certificate should be signed by the
  same CA so that mutual authentication can take place. The contents of
  <span class="strong"><strong>cafile</strong></span> are added to the trusted store of root CAs.  Using the <span class="strong"><strong>-C</strong></span> or <span class="strong"><strong>-R</strong></span>
  options will will trigger the validation of the client certificate unless
  overridden by the <span class="strong"><strong>-n</strong></span> option.
</dd><dt><span class="term">
<span class="strong"><strong>-J</strong></span> pkcs11_pin
</span></dt><dd>
   The user pin to unlock access to the PKCS11 token.
</dd><dt><span class="term">
<span class="strong"><strong>-M</strong></span>
</span></dt><dd>
  Raw Public Key (RPK) PEM file or PKCS11 URI that contains both PUBLIC KEY
  and PRIVATE KEY or just EC PRIVATE KEY. (GnuTLS and TinyDTLS(PEM) support
  only).  <span class="strong"><strong>-C cafile</strong></span> or <span class="strong"><strong>-R trust_casfile</strong></span> are not required.
</dd><dt><span class="term">
<span class="strong"><strong>-R</strong></span> trust_casfile
</span></dt><dd>
  PEM file containing the set of trusted root CAs that are to be used to
  validate the client certificate. Alternatively, this can point to a
  directory containing a set of CA PEM files. The <span class="strong"><strong>-C cafile</strong></span> CA does not have
  to be in this list and is trusted for the validation. Using
  <span class="strong"><strong>-R trust_casfile</strong></span> disables common CA mutual authentication which can only
  be done by using <span class="strong"><strong>-C cafile</strong></span>. Using the <span class="strong"><strong>-C</strong></span> or <span class="strong"><strong>-R</strong></span> options will will
  trigger the validation of the server certificate unless overridden by the
  <span class="strong"><strong>-n</strong></span> option.
</dd><dt><span class="term">
<span class="strong"><strong>-S</strong></span> match_pki_sni_file
</span></dt><dd>
   This option denotes a file that contains one or more lines of Subject Name
   Identifier (SNI) to match for new certificate File and new CA File (comma
   separated) to be used. E.g., entry per line
   sni_to_match,new_cert_file,new_ca_file
   A line that starts with # is treated as a comment.
   Note: <span class="strong"><strong>-c certfile</strong></span> and <span class="strong"><strong>-C cafile</strong></span> still needs to be defined for the
   default case
</dd></dl></div></div><div class="refsect1"><a id="_examples"></a><h2>EXAMPLES</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Example
</li></ul></div><pre class="screen">coap-server -A ::1</pre><p>Let the server listen on localhost (port <span class="emphasis"><em>5683</em></span>) for UDP/TCP.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Example
</li></ul></div><pre class="screen">coap-server -A ::1 -k mysecretKey -h myhint</pre><p>Let the server listen on localhost (port <span class="emphasis"><em>5683</em></span> for UDP/TCP and port <span class="emphasis"><em>5684</em></span> for
DTLS/TLS) with the server set up for PSK authentication if the client uses
coaps:// or coaps+tcp://.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Example
</li></ul></div><pre class="screen">coap-server -A ::1 -k mysecretKey -h myhint -p 13011</pre><p>The same, except the UDP/TCP listening port is <span class="emphasis"><em>13011</em></span> and the DTLS/TLS
listening port is <span class="emphasis"><em>13012</em></span> (and not the default ports <span class="emphasis"><em>5683</em></span> and <span class="emphasis"><em>5684</em></span>).</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Example
</li></ul></div><pre class="screen">coap-server -A 2001:db8:81a8:0:6ef0:dead:feed:beef -v 5</pre><p>The listening address is set to <span class="emphasis"><em>2001:db8:81a8:0:6ef0:dead:feed:beef</em></span> and the
verbosity level is set to <span class="emphasis"><em>5</em></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Example
</li></ul></div><pre class="screen">coap-server -A 2001:db8:81a8:0:6ef0:dead:feed:beef -g FF02::FD</pre><p>Set listening address to <span class="emphasis"><em>2001:db8:81a8:0:6ef0:dead:feed:beef</em></span> and join the
All CoAP Nodes multicast group <span class="emphasis"><em>FF02::FD</em></span>.</p></div><div class="refsect1"><a id="_files"></a><h2>FILES</h2><p>There are no configuration files.</p></div><div class="refsect1"><a id="_exit_status"></a><h2>EXIT STATUS</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>0</strong></span>
</span></dt><dd>
   Success
</dd><dt><span class="term">
<span class="strong"><strong>1</strong></span>
</span></dt><dd>
   Failure (syntax or usage error; configuration error; document
   processing failure; unexpected error)
</dd></dl></div></div><div class="refsect1"><a id="_bugs"></a><h2>BUGS</h2><p>Please report bugs on the mailing list for libcoap:
<a class="ulink" href="mailto:libcoap-developers@lists.sourceforge.net" target="_top">libcoap-developers@lists.sourceforge.net</a> or raise an issue on GitHub at
<a class="ulink" href="https://github.com/obgm/libcoap/issues" target="_top">https://github.com/obgm/libcoap/issues</a></p></div><div class="refsect1"><a id="_authors"></a><h2>AUTHORS</h2><p>The libcoap project &lt;<a class="ulink" href="mailto:libcoap-developers@lists.sourceforge.net" target="_top">libcoap-developers@lists.sourceforge.net</a>&gt;</p></div></div></body></html> coap-server(5) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 21 2021 10:40:33 for libcoap by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
