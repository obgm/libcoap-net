<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoap: coap_session_get_non_timeout(3)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcoap<span id="projectnumber">&#160;4.3.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('man_coap_session_get_non_timeout.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">coap_session_get_non_timeout(3) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>coap_recovery</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="idm1"></a><div class="titlepage"></div><div class="refnamediv"><h2>NAME</h2><p><a href="man_coap_recovery.html#coap_recovery" target="_self">coap_recovery</a>, <a href="man_coap_session_set_ack_random_factor.html#coap_session_set_ack_random_factor" target="_self">coap_session_set_ack_random_factor</a>, <a href="man_coap_session_get_ack_random_factor.html#coap_session_get_ack_random_factor" target="_self">coap_session_get_ack_random_factor</a>, <a href="man_coap_session_set_ack_timeout.html#coap_session_set_ack_timeout" target="_self">coap_session_set_ack_timeout</a>, <a href="man_coap_session_get_ack_timeout.html#coap_session_get_ack_timeout" target="_self">coap_session_get_ack_timeout</a>, <a href="man_coap_session_set_default_leisure.html#coap_session_set_default_leisure" target="_self">coap_session_set_default_leisure</a>, <a href="man_coap_session_get_default_leisure.html#coap_session_get_default_leisure" target="_self">coap_session_get_default_leisure</a>, <a href="man_coap_session_set_max_payloads.html#coap_session_set_max_payloads" target="_self">coap_session_set_max_payloads</a>, <a href="man_coap_session_get_max_payloads.html#coap_session_get_max_payloads" target="_self">coap_session_get_max_payloads</a>, <a href="man_coap_session_set_max_retransmit.html#coap_session_set_max_retransmit" target="_self">coap_session_set_max_retransmit</a>, <a href="man_coap_session_get_max_retransmit.html#coap_session_get_max_retransmit" target="_self">coap_session_get_max_retransmit</a>, <a href="man_coap_session_set_non_max_retransmit.html#coap_session_set_non_max_retransmit" target="_self">coap_session_set_non_max_retransmit</a>, <a href="man_coap_session_get_non_max_retransmit.html#coap_session_get_non_max_retransmit" target="_self">coap_session_get_non_max_retransmit</a>, <a href="man_coap_session_set_non_receive_timeout.html#coap_session_set_non_receive_timeout" target="_self">coap_session_set_non_receive_timeout</a>, <a href="man_coap_session_get_non_receive_timeout.html#coap_session_get_non_receive_timeout" target="_self">coap_session_get_non_receive_timeout</a>, <a href="man_coap_session_set_non_timeout.html#coap_session_set_non_timeout" target="_self">coap_session_set_non_timeout</a>, <a href="man_coap_session_get_non_timeout.html#coap_session_get_non_timeout" target="_self"><span class="man-highlight">coap_session_get_non_timeout</span></a>, <a href="man_coap_session_set_nstart.html#coap_session_set_nstart" target="_self">coap_session_set_nstart</a>, <a href="man_coap_session_get_nstart.html#coap_session_get_nstart" target="_self">coap_session_get_nstart</a>, <a href="man_coap_session_set_probing_rate.html#coap_session_set_probing_rate" target="_self">coap_session_set_probing_rate</a>, <a href="man_coap_session_get_probing_rate.html#coap_session_get_probing_rate" target="_self">coap_session_get_probing_rate</a>, <a href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a> - Work with CoAP packet transmissions </p></div><div class="refsynopsisdiv"><a id="_synopsis"></a><h2>SYNOPSIS</h2><p><span class="strong"><strong>#include &lt;coap3/coap.h&gt;</strong></span></p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_ack_random_factor.html#coap_session_set_ack_random_factor" target="_self">coap_session_set_ack_random_factor</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
coap_fixed_point_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>coap_fixed_point_t <a class="st-synopsis" href="man_coap_session_get_ack_random_factor.html#coap_session_get_ack_random_factor" target="_self">coap_session_get_ack_random_factor</a>(
const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_ack_timeout.html#coap_session_set_ack_timeout" target="_self">coap_session_set_ack_timeout</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
coap_fixed_point_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>coap_fixed_point_t <a class="st-synopsis" href="man_coap_session_get_ack_timeout.html#coap_session_get_ack_timeout" target="_self">coap_session_get_ack_timeout</a>(
const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_default_leisure.html#coap_session_set_default_leisure" target="_self">coap_session_set_default_leisure</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
coap_fixed_point_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>coap_fixed_point_t <a class="st-synopsis" href="man_coap_session_get_default_leisure.html#coap_session_get_default_leisure" target="_self">coap_session_get_default_leisure</a>(
const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_max_payloads.html#coap_session_set_max_payloads" target="_self">coap_session_set_max_payloads</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
uint16_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>uint16_t <a class="st-synopsis" href="man_coap_session_get_max_payloads.html#coap_session_get_max_payloads" target="_self">coap_session_get_max_payloads</a>(const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_max_retransmit.html#coap_session_set_max_retransmit" target="_self">coap_session_set_max_retransmit</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
uint16_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>uint16_t <a class="st-synopsis" href="man_coap_session_get_max_retransmit.html#coap_session_get_max_retransmit" target="_self">coap_session_get_max_retransmit</a>(const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_non_max_retransmit.html#coap_session_set_non_max_retransmit" target="_self">coap_session_set_non_max_retransmit</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
uint16_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>uint16_t <a class="st-synopsis" href="man_coap_session_get_non_max_retransmit.html#coap_session_get_non_max_retransmit" target="_self">coap_session_get_non_max_retransmit</a>(const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_non_receive_timeout.html#coap_session_set_non_receive_timeout" target="_self">coap_session_set_non_receive_timeout</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
coap_fixed_point_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>coap_fixed_point_t <a class="st-synopsis" href="man_coap_session_get_non_receive_timeout.html#coap_session_get_non_receive_timeout" target="_self">coap_session_get_non_receive_timeout</a>(
const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_non_timeout.html#coap_session_set_non_timeout" target="_self">coap_session_set_non_timeout</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
coap_fixed_point_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>coap_fixed_point_t <a class="st-synopsis" href="man_coap_session_get_non_timeout.html#coap_session_get_non_timeout" target="_self"><span class="man-highlight">coap_session_get_non_timeout</span></a>(
const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_nstart.html#coap_session_set_nstart" target="_self">coap_session_set_nstart</a>(coap_session_t *<span class="emphasis"><em>session</em></span>, uint16_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>uint16_t <a class="st-synopsis" href="man_coap_session_get_nstart.html#coap_session_get_nstart" target="_self">coap_session_get_nstart</a>(const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>void <a class="st-synopsis" href="man_coap_session_set_probing_rate.html#coap_session_set_probing_rate" target="_self">coap_session_set_probing_rate</a>(coap_session_t *<span class="emphasis"><em>session</em></span>,
uint32_t <span class="emphasis"><em>value</em></span>)</strong></span>;</p><p><span class="strong"><strong>uint32_t <a class="st-synopsis" href="man_coap_session_get_probing_rate.html#coap_session_get_probing_rate" target="_self">coap_session_get_probing_rate</a>(const coap_session_t *<span class="emphasis"><em>session</em></span>)</strong></span>;</p><p><span class="strong"><strong>int <a class="st-synopsis" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a>(const char *<span class="emphasis"><em>loss_level</em></span>)</strong></span>;</p><p>For specific (D)TLS library support, link with
<span class="strong"><strong>-lcoap-3-notls</strong></span>, <span class="strong"><strong>-lcoap-3-gnutls</strong></span>,
<span class="strong"><strong>-lcoap-3-openssl</strong></span>, <span class="strong"><strong>-lcoap-3-mbedtls</strong></span>
or <span class="strong"><strong>-lcoap-3-tinydtls</strong></span>.   Otherwise, link with
<span class="strong"><strong>-lcoap-3</strong></span> to get the default (D)TLS library support.</p></div><div class="refsect1"><a id="_description"></a><h2>DESCRIPTION</h2><p>There is CoAP Confirmable message transmission recovery as defined in
<a class="ulink" href="https://rfc-editor.org/rfc/rfc7252" target="_top">RFC7252</a>, as well CoAP Non-Confirmable
split into blocks  message transmission recovery support as defined in
<a class="ulink" href="https://rfc-editor.org/rfc/rfc9177" target="_top">RFC9177</a>.</p><p>For CoAP Confirmable messages, it is possible to define the retry counts,
repeat rate etc. for error recovery.  Further information can be found in
"<a class="ulink" href="https://rfc-editor.org/rfc/rfc7252#section-4.2" target="_top">RFC7272 4.2. Messages
Transmitted Reliably</a>",
with the default values defined in
"<a class="ulink" href="https://rfc-editor.org/rfc/rfc7252#section-4.8" target="_top">RFC7272 4.8. Transmission
Parameters</a>".</p><p>It is not recommended that the suggested default setting are changed, but
there may be some special requirements that need different values and the
consequences of changing these values is fully understood.</p><p>Some of the parameters or return values are in fixed point format as defined
by the coap_fixed_point_t structure as below</p><pre class="screen">typedef struct coap_fixed_point_t {
  uint16_t integer_part;    /* Integer part of fixed point variable */
  uint16_t fractional_part; /* Fractional part of fixed point variable
                               1/1000 (3 points) precision */
} coap_fixed_point_t;</pre><p>The CoAP Confirmable message retry rules are (with the default values to
compute the time)</p><pre class="screen">1st retransmit after 1 * ack_timeout * ack_random factor (3 seconds)
2nd retransmit after 2 * ack_timeout * ack_random factor (6 seconds)
3rd retransmit after 3 * ack_timeout * ack_random factor (12 seconds)
4th retransmit after 4 * ack_timeout * ack_random factor (24 seconds)
5th retransmit after 5 * ack_timeout * ack_random factor (48 seconds)

As max_retransmit (by default) is 4, then the 5th retransmit does not get sent,
but at that point COAP_NACK_TOO_MANY_RETRIES gets raised in the nack_handler
(if defined). Note that the sum of the seconds is 93 matching
"https://rfc-editor.org/rfc/rfc7252#section-4.8.2[RFC7252 4.8.2.
MAX_TRANSMIT_WAIT]".</pre><p>It should be noted that these retries are separate from the DTLS or TLS
encrypted session setup retry timeouts. For DTLS, the initial requesting
packet will get sent max_retransmit times before reporting failure.
For TLS the initial TCP connection will timeout before reporting failure.</p><p>For CoAP Non-Confirmable messages with
<a class="ulink" href="https://rfc-editor.org/rfc/rfc9177" target="_top">RFC9177</a> enabled at both ends of a
session, it is possible to define the retry counts etc. for data recovery.
Further information can be found in
"<a class="ulink" href="https://rfc-editor.org/rfc/rfc9177#section-7.2" target="_top">RFC9177
7.2. Non-confirmable (NON)</a>".</p><p>It is also possible to set up packet losses, for both confirmable, and
non-confirmable messages.  This can be used for stress testing packet
transmission recovery as well as application handling of lossy networks.</p></div><div class="refsect1"><a id="_functions"></a><h2>FUNCTIONS</h2><p>The following functions reflect the <a class="ulink" href="https://rfc-editor.org/rfc/rfc7252" target="_top">RFC7252</a>
and <a class="ulink" href="https://rfc-editor.org/rfc/rfc9177" target="_top">RFC9177</a> uppercase names
in lowercase following the coap_session_set_ or coap_session_get_ function
prefix.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_ack_random_factor.html#coap_session_set_ack_random_factor" target="_self">coap_session_set_ack_random_factor</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_ack_random_factor.html#coap_session_set_ack_random_factor" target="_self">coap_session_set_ack_random_factor</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span> ack
random wait factor, used to randomize re-transmissions, with the new <span class="emphasis"><em>value</em></span>.
The default value is 1.5 (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_ack_random_factor.html#coap_session_get_ack_random_factor" target="_self">coap_session_get_ack_random_factor</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_ack_random_factor.html#coap_session_get_ack_random_factor" target="_self">coap_session_get_ack_random_factor</a></strong></span>() function returns the current
<span class="emphasis"><em>session</em></span> ack random wait factor (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_ack_timeout.html#coap_session_set_ack_timeout" target="_self">coap_session_set_ack_timeout</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_ack_timeout.html#coap_session_set_ack_timeout" target="_self">coap_session_set_ack_timeout</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span> initial
ack or response timeout with the new <span class="emphasis"><em>value</em></span>.  The default value is 2.0
(RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_ack_timeout.html#coap_session_get_ack_timeout" target="_self">coap_session_get_ack_timeout</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_ack_timeout.html#coap_session_get_ack_timeout" target="_self">coap_session_get_ack_timeout</a></strong></span>() function returns the current <span class="emphasis"><em>session</em></span>
initial ack or response timeout (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_default_leisure.html#coap_session_set_default_leisure" target="_self">coap_session_set_default_leisure</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_default_leisure.html#coap_session_set_default_leisure" target="_self">coap_session_set_default_leisure</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span>
default leisure time with the new <span class="emphasis"><em>value</em></span>.  The default value is 5.0 (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_default_leisure.html#coap_session_get_default_leisure" target="_self">coap_session_get_default_leisure</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_default_leisure.html#coap_session_get_default_leisure" target="_self">coap_session_get_default_leisure</a></strong></span>() function returns the current <span class="emphasis"><em>session</em></span>
default leisure time (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_max_payloads.html#coap_session_set_max_payloads" target="_self">coap_session_set_max_payloads</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_max_payloads.html#coap_session_set_max_payloads" target="_self">coap_session_set_max_payloads</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span> maximum
payloads count with the new <span class="emphasis"><em>value</em></span>.  The default value is 10 (RFC9177).</p><p><span class="strong"><strong>NOTE:</strong></span> Both ends of the session must have the same maximum payloads value to
minimize any recovery times.</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_max_payloads.html#coap_session_get_max_payloads" target="_self">coap_session_get_max_payloads</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_max_payloads.html#coap_session_get_max_payloads" target="_self">coap_session_get_max_payloads</a></strong></span>() function returns the current <span class="emphasis"><em>session</em></span>
maximum payloads count (RFC9177).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_max_retransmit.html#coap_session_set_max_retransmit" target="_self">coap_session_set_max_retransmit</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_max_retransmit.html#coap_session_set_max_retransmit" target="_self">coap_session_set_max_retransmit</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span> maximum
retransmit count with the new <span class="emphasis"><em>value</em></span>.  The default value is 4 (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_max_retransmit.html#coap_session_get_max_retransmit" target="_self">coap_session_get_max_retransmit</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_max_retransmit.html#coap_session_get_max_retransmit" target="_self">coap_session_get_max_retransmit</a></strong></span>() function returns the current <span class="emphasis"><em>session</em></span>
maximum retransmit count (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_non_max_retransmit.html#coap_session_set_non_max_retransmit" target="_self">coap_session_set_non_max_retransmit</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_non_max_retransmit.html#coap_session_set_non_max_retransmit" target="_self">coap_session_set_non_max_retransmit</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span>
maximum non retransmit count with the new <span class="emphasis"><em>value</em></span>.  The default value is 4
(RFC9177).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_non_max_retransmit.html#coap_session_get_non_max_retransmit" target="_self">coap_session_get_non_max_retransmit</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_non_max_retransmit.html#coap_session_get_non_max_retransmit" target="_self">coap_session_get_non_max_retransmit</a></strong></span>() function returns the current
<span class="emphasis"><em>session</em></span> maximum non retransmit count (RFC9177).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_non_receive_timeout.html#coap_session_set_non_receive_timeout" target="_self">coap_session_set_non_receive_timeout</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_non_receive_timeout.html#coap_session_set_non_receive_timeout" target="_self">coap_session_set_non_receive_timeout</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span>
non receive timeout with the new <span class="emphasis"><em>value</em></span>.  The default value is 4.0
(RFC9177).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_non_receive_timeout.html#coap_session_get_non_receive_timeout" target="_self">coap_session_get_non_receive_timeout</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_non_receive_timeout.html#coap_session_get_non_receive_timeout" target="_self">coap_session_get_non_receive_timeout</a></strong></span>() function returns the current
<span class="emphasis"><em>session</em></span> non receive timeout (RFC9177).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_non_timeout.html#coap_session_set_non_timeout" target="_self">coap_session_set_non_timeout</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_non_timeout.html#coap_session_set_non_timeout" target="_self">coap_session_set_non_timeout</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span>
non timeout with the new <span class="emphasis"><em>value</em></span>.  The default value is 2.0
(RFC9177).</p><p><span class="strong"><strong><a class="anchor" id="coap_session_get_non_timeout"></a>Function: <a href="man_coap_session_get_non_timeout.html#coap_session_get_non_timeout" target="_self"><span class="man-highlight">coap_session_get_non_timeout</span></a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_non_timeout.html#coap_session_get_non_timeout" target="_self"><span class="man-highlight">coap_session_get_non_timeout</span></a></strong></span>() function returns the current
<span class="emphasis"><em>session</em></span> non timeout (RFC9177).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_nstart.html#coap_session_set_nstart" target="_self">coap_session_set_nstart</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_nstart.html#coap_session_set_nstart" target="_self">coap_session_set_nstart</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span> nstart
with the new <span class="emphasis"><em>value</em></span>.  The default value is 1 (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_probing_rate.html#coap_session_set_probing_rate" target="_self">coap_session_set_probing_rate</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_nstart.html#coap_session_get_nstart" target="_self">coap_session_get_nstart</a></strong></span>() function returns the current <span class="emphasis"><em>session</em></span>
nstart value (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_set_probing_rate.html#coap_session_set_probing_rate" target="_self">coap_session_set_probing_rate</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_set_probing_rate.html#coap_session_set_probing_rate" target="_self">coap_session_set_probing_rate</a></strong></span>() function updates the <span class="emphasis"><em>session</em></span> probing
rate with the new <span class="emphasis"><em>value</em></span>.  The default value is 1 byte per second (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_session_get_probing_rate.html#coap_session_get_probing_rate" target="_self">coap_session_get_probing_rate</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_probing_rate.html#coap_session_get_probing_rate" target="_self">coap_session_get_probing_rate</a></strong></span>() function returns the current <span class="emphasis"><em>session</em></span>
probing rate value (RFC7252).</p><p><span class="strong"><strong>Function: <a class="st-desc" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a>()</strong></span></p><p>The <span class="strong"><strong><a class="st-desc" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a></strong></span>() function is uses to set the packet loss
levels as defined in <span class="emphasis"><em>loss_level</em></span>.  <span class="emphasis"><em>loss_level</em></span> can be set as a percentage
from "0%" to "100%".
Alternatively, it is possible to specify which packets of a packet sequence
are dropped.  A definition of "1,5-9,11-20,101" means that packets 1, 5
through 9, 11 through 20 and 101 will get dropped. A maximum of 10 different
packet sets is supported.  The packet count is reset to 0 when
<span class="strong"><strong><a class="st-desc" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a></strong></span>() is called.
To remove any packet losses, set the <span class="emphasis"><em>loss_level</em></span> to "0%".</p></div><div class="refsect1"><a id="_return_values"></a><h2>RETURN VALUES</h2><p><span class="strong"><strong><a class="st-desc" href="man_coap_session_get_ack_random_factor.html#coap_session_get_ack_random_factor" target="_self">coap_session_get_ack_random_factor</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_ack_timeout.html#coap_session_get_ack_timeout" target="_self">coap_session_get_ack_timeout</a></strong></span>(),
<span class="strong"><strong><a class="st-desc" href="man_coap_session_get_default_leisure.html#coap_session_get_default_leisure" target="_self">coap_session_get_default_leisure</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_max_payloads.html#coap_session_get_max_payloads" target="_self">coap_session_get_max_payloads</a></strong></span>(),
<span class="strong"><strong><a class="st-desc" href="man_coap_session_get_max_retransmit.html#coap_session_get_max_retransmit" target="_self">coap_session_get_max_retransmit</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_non_max_retransmit.html#coap_session_get_non_max_retransmit" target="_self">coap_session_get_non_max_retransmit</a></strong></span>(),
<span class="strong"><strong><a class="st-desc" href="man_coap_session_get_non_receive_timeout.html#coap_session_get_non_receive_timeout" target="_self">coap_session_get_non_receive_timeout</a></strong></span>(), <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_non_timeout.html#coap_session_get_non_timeout" target="_self"><span class="man-highlight">coap_session_get_non_timeout</span></a></strong></span>(),
<span class="strong"><strong><a class="st-desc" href="man_coap_session_get_nstart.html#coap_session_get_nstart" target="_self">coap_session_get_nstart</a></strong></span>() and <span class="strong"><strong><a class="st-desc" href="man_coap_session_get_probing_rate.html#coap_session_get_probing_rate" target="_self">coap_session_get_probing_rate</a></strong></span>() return their
respective current values.</p><p><span class="strong"><strong><a class="st-desc" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a></strong></span>() returns 0 if <span class="emphasis"><em>loss_level</em></span> does not parse
correctly, otherwise 1 if successful.</p></div><div class="refsect1"><a id="_testing"></a><h2>TESTING</h2><p>The libcoap RFC7252 recovery/re-transmit logic will only work for confirmable
requests or if RFC9177 support is enabled for non-confirmable large body
transmissions that need to span multiple packets.</p><p>To see what is happening (other than by sniffing the network traffic), the
logging level needs to be set to COAP_LOG_DEBUG in the client by using
<span class="strong"><strong><a class="st-desc" href="man_coap_set_log_level.html#coap_set_log_level" target="_self">coap_set_log_level</a></strong></span>(COAP_LOG_DEBUG) and
<span class="strong"><strong><a class="st-desc" href="man_coap_dtls_set_log_level.html#coap_dtls_set_log_level" target="_self">coap_dtls_set_log_level</a></strong></span>(COAP_LOG_DEBUG).</p><p>The server can either be stopped, or if packet loss levels are set to 100% by
using <span class="strong"><strong><a class="st-desc" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a></strong></span>("100%") when receiving the client requests.</p><p><span class="strong"><strong>NOTE:</strong></span> If the server end of the connection is returning ICMP unreachable
packets after being turned off, you will get a debug message of the form
"coap_network_read: unreachable", so libcoap will stop doing the retries.  If
this is the case, then you need to make use of (on the server)
<span class="strong"><strong><a class="st-desc" href="man_coap_debug_set_packet_loss.html#coap_debug_set_packet_loss" target="_self">coap_debug_set_packet_loss</a></strong></span>("100%") or put in some packet filtering to drop the
packets.</p><p>For confirmable transmissions, the client should then restart transmitting the
requests based on the ack_timeout, ack_random_factor and max_retransmit values.
The client’s nack_handler will get called with COAP_NACK_TOO_MANY_RETRIES when
the confirmable request cannot be successfully transmitted.</p><p>For non-confirmable block transmissions (RFC9177 enabled), the client should
then restart transmitting the missing requests based on the max_payloads,
non_timeout, non_receive_timeout, and non_max_retransmit values. The client’s
nack_handler will get called with COAP_NACK_TOO_MANY_RETRIES when
the non-confirmable large body request cannot be successfully transmitted.</p></div><div class="refsect1"><a id="_further_information"></a><h2>FURTHER INFORMATION</h2><p>See</p><p>"<a class="ulink" href="https://rfc-editor.org/rfc/rfc7252" target="_top">RFC7252: The Constrained Application Protocol (CoAP)</a>"</p><p>"<a class="ulink" href="https://rfc-editor.org/rfc/rfc9177" target="_top">RFC9177: Constrained Application Protocol (CoAP) Block-Wise Transfer Options Supporting Robust Transmission</a>"</p><p>for further information.</p></div><div class="refsect1"><a id="_bugs"></a><h2>BUGS</h2><p>Please report bugs on the mailing list for libcoap:
<a class="ulink" href="mailto:libcoap-developers@lists.sourceforge.net" target="_top">libcoap-developers@lists.sourceforge.net</a> or raise an issue on GitHub at
<a class="ulink" href="https://github.com/obgm/libcoap/issues" target="_top">https://github.com/obgm/libcoap/issues</a></p></div><div class="refsect1"><a id="_authors"></a><h2>AUTHORS</h2><p>The libcoap project &lt;<a class="ulink" href="mailto:libcoap-developers@lists.sourceforge.net" target="_top">libcoap-developers@lists.sourceforge.net</a>&gt;</p></div></div></body></html> coap_session_get_non_timeout(3)</p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 6 2023 17:16:41 for libcoap by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
